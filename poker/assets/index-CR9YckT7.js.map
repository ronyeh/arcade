{"version":3,"file":"index-CR9YckT7.js","sources":["../../poker-src/src/Card.ts","../../poker-src/src/Deck.ts","../../poker-src/src/Player.ts","../../poker-src/src/HandEvaluator.ts","../../poker-src/src/GameState.ts","../../poker-src/src/SVGGraphics.ts","../../poker-src/node_modules/ms/index.js","../../poker-src/node_modules/debug/src/common.js","../../poker-src/node_modules/debug/src/browser.js","../../poker-src/node_modules/get-browser-rtc/index.js","../../poker-src/node_modules/base64-js/index.js","../../poker-src/node_modules/ieee754/index.js","../../poker-src/node_modules/buffer/index.js","../../poker-src/node_modules/safe-buffer/index.js","../../poker-src/node_modules/randombytes/browser.js","../../poker-src/__vite-browser-external","../../poker-src/node_modules/readable-stream/lib/internal/streams/stream-browser.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/buffer_list.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/destroy.js","../../poker-src/node_modules/readable-stream/errors-browser.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/state.js","../../poker-src/node_modules/inherits/inherits_browser.js","../../poker-src/node_modules/util-deprecate/browser.js","../../poker-src/node_modules/readable-stream/lib/_stream_writable.js","../../poker-src/node_modules/readable-stream/lib/_stream_duplex.js","../../poker-src/node_modules/string_decoder/lib/string_decoder.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/async_iterator.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/from-browser.js","../../poker-src/node_modules/readable-stream/lib/_stream_readable.js","../../poker-src/node_modules/readable-stream/lib/_stream_transform.js","../../poker-src/node_modules/readable-stream/lib/_stream_passthrough.js","../../poker-src/node_modules/readable-stream/lib/internal/streams/pipeline.js","../../poker-src/node_modules/readable-stream/readable-browser.js","../../poker-src/node_modules/queue-microtask/index.js","../../poker-src/node_modules/err-code/index.js","../../poker-src/node_modules/simple-peer/index.js","../../poker-src/src/Network.ts","../../poker-src/src/UI.ts","../../poker-src/src/main.ts"],"sourcesContent":["export enum Suit {\n  Hearts = 'H',\n  Diamonds = 'D',\n  Clubs = 'C',\n  Spades = 'S',\n}\n\nexport enum Rank {\n  Two = '2',\n  Three = '3',\n  Four = '4',\n  Five = '5',\n  Six = '6',\n  Seven = '7',\n  Eight = '8',\n  Nine = '9',\n  Ten = 'T',\n  Jack = 'J',\n  Queen = 'Q',\n  King = 'K',\n  Ace = 'A',\n}\n\nexport interface Card {\n  suit: Suit;\n  rank: Rank;\n  toString(): string;\n}\n\nexport function createCard(rank: Rank, suit: Suit): Card {\n  return {\n    rank,\n    suit,\n    toString() {\n      return `${this.rank}${this.suit}`;\n    },\n  };\n}\n\n// Example Usage (can be removed later)\n// const card1 = createCard(Rank.Ace, Suit.Hearts);\n// console.log(card1.toString()); // AH\n// const card2 = createCard(Rank.Ten, Suit.Spades);\n// console.log(card2.toString()); // TS\n","import { Card, Suit, Rank, createCard } from './Card';\n\nexport class Deck {\n  private cards: Card[];\n\n  constructor() {\n    this.cards = [];\n    this.initializeDeck();\n  }\n\n  private initializeDeck(): void {\n    this.cards = [];\n    for (const suit of Object.values(Suit)) {\n      for (const rank of Object.values(Rank)) {\n        this.cards.push(createCard(rank, suit));\n      }\n    }\n  }\n\n  shuffle(): void {\n    // Fisher-Yates shuffle algorithm\n    for (let i = this.cards.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [this.cards[i], this.cards[j]] = [this.cards[j], this.cards[i]];\n    }\n  }\n\n  deal(): Card | undefined {\n    if (this.cards.length === 0) {\n      return undefined; // Or throw an error\n    }\n    return this.cards.pop();\n  }\n\n  getCardsCount(): number {\n    return this.cards.length;\n  }\n\n  reset(): void {\n    this.initializeDeck();\n    this.shuffle();\n  }\n}\n\n// Example Usage (can be removed later)\n// const deck = new Deck();\n// deck.shuffle();\n// console.log(`Deck has ${deck.getCardsCount()} cards.`);\n// const card1 = deck.deal();\n// console.log(`Dealt: ${card1?.toString()}`);\n// console.log(`Deck has ${deck.getCardsCount()} cards remaining.`);\n// const card2 = deck.deal();\n// console.log(`Dealt: ${card2?.toString()}`);\n// console.log(`Deck has ${deck.getCardsCount()} cards remaining.`);\n\n// for (let i = 0; i < 55; i++) { // Test dealing all cards + one more\n//   const card = deck.deal();\n//   console.log(`Dealt: ${card?.toString()}, Remaining: ${deck.getCardsCount()}`);\n// }\n","import { Card, createCard, Rank, Suit } from './Card'; // Ensure createCard is imported\n\nexport class Player {\n  id: string;\n  hand: Card[];\n  chips: number;\n  currentBet: number;\n  folded: boolean;\n  isAllIn: boolean;\n  name: string; \n\n  constructor(id: string, name: string, initialChips: number) {\n    this.id = id;\n    this.name = name;\n    this.chips = initialChips;\n    this.hand = [];\n    this.currentBet = 0;\n    this.folded = false;\n    this.isAllIn = false;\n  }\n\n  receiveCard(card: Card): void {\n    this.hand.push(card);\n  }\n\n  clearHand(): void {\n    this.hand = [];\n    this.currentBet = 0; // Reset per-round bet\n    this.folded = false;\n    this.isAllIn = false; // isAllIn should persist if chips are 0, but can be reset if chips are added.\n                         // For simplicity, reset here. Real game might need more nuanced logic if player buys back in etc.\n  }\n\n  fold(): void {\n    this.folded = true;\n    console.log(`${this.name} folds.`);\n  }\n\n  private placeBet(amount: number): number {\n    const betAmount = Math.min(amount, this.chips);\n    this.chips -= betAmount;\n    this.currentBet += betAmount;\n    if (this.chips === 0) {\n      this.isAllIn = true;\n      console.log(`${this.name} is All-In!`);\n    }\n    return betAmount;\n  }\n\n  bet(amount: number): number {\n    console.log(`${this.name} bets ${amount}.`);\n    return this.placeBet(amount);\n  }\n\n  call(currentRoundBet: number): number {\n    const amountToCall = currentRoundBet - this.currentBet;\n    if (amountToCall <= 0) {\n      console.log(`${this.name} checks.`); \n      return 0; \n    }\n    console.log(`${this.name} calls ${amountToCall}.`);\n    return this.placeBet(amountToCall);\n  }\n\n  raise(raiseAmount: number, currentRoundBetForAction: number): number {\n    // raiseAmount is the additional amount on top of the currentRoundBetForAction they are facing.\n    // The total bet they will have made this round is currentRoundBetForAction + raiseAmount.\n    // The actual chips they need to put in is (currentRoundBetForAction + raiseAmount) - this.currentBet.\n    const amountToPlace = (currentRoundBetForAction + raiseAmount) - this.currentBet;\n    console.log(`${this.name} raises by ${raiseAmount} (total bet this round will be ${this.currentBet + amountToPlace}).`);\n    return this.placeBet(amountToPlace);\n  }\n\n  winPot(amount: number): void {\n    this.chips += amount;\n    console.log(`${this.name} wins ${amount} chips.`);\n  }\n\n  returnBet(amount: number): void {\n    this.chips += amount;\n    this.currentBet -= amount; // Reduce their current bet amount by what's returned\n  }\n\n  // --- Serialization methods ---\n  public toJSON(): object {\n    return {\n      id: this.id,\n      name: this.name, // Name might be changed to \"You\" or \"Peer\" by GameState during its own toJSON/fromJSON\n      chips: this.chips,\n      currentBet: this.currentBet,\n      folded: this.folded,\n      isAllIn: this.isAllIn,\n      hand: this.hand.map(card => ({ rank: card.rank, suit: card.suit })),\n    };\n  }\n\n  public static fromJSON(json: any): Player {\n    const player = new Player(json.id, json.name, json.chips);\n    player.currentBet = json.currentBet;\n    player.folded = json.folded;\n    player.isAllIn = json.isAllIn;\n    player.hand = json.hand.map((c: {rank: Rank, suit: Suit}) => createCard(c.rank, c.suit));\n    return player;\n  }\n\n  public updateFromJSON(json: any): void {\n    this.chips = json.chips;\n    this.currentBet = json.currentBet;\n    this.folded = json.folded;\n    this.isAllIn = json.isAllIn;\n    this.hand = json.hand.map((c: {rank: Rank, suit: Suit}) => createCard(c.rank, c.suit));\n    // Note: 'name' is intentionally not updated here as GameState handles \"You\"/\"Peer\" assignment.\n    // If general name changes were allowed, this would be different.\n  }\n}\n","import { Card, Rank } from './Card';\n\n// Hand Ranks (lower number is better, traditionally)\n// For simplicity here, let's use higher number = better hand for now.\n// We can reverse this if needed.\nexport const HAND_RANKS = {\n  HIGH_CARD: 0,\n  PAIR: 1,\n  TWO_PAIR: 2,\n  THREE_OF_A_KIND: 3,\n  STRAIGHT: 4,\n  FLUSH: 5,\n  FULL_HOUSE: 6,\n  FOUR_OF_A_KIND: 7,\n  STRAIGHT_FLUSH: 8,\n  ROYAL_FLUSH: 9,\n};\n\n// For tie-breaking, numeric values of ranks are useful.\n// Ace can be high (14) or low (1 for A-5 straight).\nexport const RANK_VALUES: { [key in Rank]: number } = {\n  [Rank.Two]: 2,\n  [Rank.Three]: 3,\n  [Rank.Four]: 4,\n  [Rank.Five]: 5,\n  [Rank.Six]: 6,\n  [Rank.Seven]: 7,\n  [Rank.Eight]: 8,\n  [Rank.Nine]: 9,\n  [Rank.Ten]: 10,\n  [Rank.Jack]: 11,\n  [Rank.Queen]: 12,\n  [Rank.King]: 13,\n  [Rank.Ace]: 14, // Ace high by default\n};\n\n\nexport interface HandEvaluationResult {\n  rank: number; // One of HAND_RANKS\n  value: number[]; // Values for tie-breaking (e.g., [RankValue_Pair, Kicker1, Kicker2, Kicker3, Kicker4])\n  handName: string; // e.g., \"Pair of Kings\"\n}\n\nexport class HandEvaluator {\n  constructor() {}\n\n  // Placeholder: very basic evaluation (e.g., highest card)\n  // A full implementation is complex and will be done later.\n  evaluateHand(hand: Card[]): HandEvaluationResult {\n    if (!hand || hand.length === 0) {\n      return { rank: HAND_RANKS.HIGH_CARD, value: [0], handName: 'No cards' };\n    }\n\n    // Sort hand by rank (descending) for easier high card eval\n    const sortedHand = [...hand].sort((a, b) => RANK_VALUES[b.rank] - RANK_VALUES[a.rank]);\n    \n    const highestCardValue = RANK_VALUES[sortedHand[0].rank];\n\n    // This is a very simplified placeholder.\n    // For now, just return High Card based on the highest card in the hand.\n    // The value array will contain all card ranks in descending order for tie-breaking.\n    const tieBreakerValues = sortedHand.map(card => RANK_VALUES[card.rank]);\n\n    return {\n      rank: HAND_RANKS.HIGH_CARD,\n      value: tieBreakerValues,\n      handName: `High Card: ${sortedHand[0].rank}`,\n    };\n  }\n}\n\n// Example Usage (can be removed later)\n// import { createCard, Suit } from \"./Card\";\n// const evaluator = new HandEvaluator();\n// const hand1: Card[] = [\n//   createCard(Rank.Ace, Suit.Hearts),\n//   createCard(Rank.King, Suit.Diamonds),\n//   createCard(Rank.Five, Suit.Clubs),\n//   createCard(Rank.Two, Suit.Spades),\n//   createCard(Rank.Seven, Suit.Hearts),\n// ];\n// const hand2: Card[] = [\n//   createCard(Rank.Queen, Suit.Hearts),\n//   createCard(Rank.King, Suit.Diamonds),\n//   createCard(Rank.Five, Suit.Clubs),\n//   createCard(Rank.Two, Suit.Spades),\n//   createCard(Rank.Seven, Suit.Hearts),\n// ];\n\n// const result1 = evaluator.evaluateHand(hand1); // 5 cards for a typical hand\n// console.log(`Hand 1: ${hand1.map(c=>c.toString())} -> Rank: ${result1.rank}, Value: ${result1.value}, Name: ${result1.handName}`);\n\n// const result2 = evaluator.evaluateHand(hand2);\n// console.log(`Hand 2: ${hand2.map(c=>c.toString())} -> Rank: ${result2.rank}, Value: ${result2.value}, Name: ${result2.handName}`);\n\n// // Test with 7 cards (community + player)\n// const communityCards: Card[] = [\n//   createCard(Rank.Ten, Suit.Clubs),\n//   createCard(Rank.Jack, Suit.Hearts),\n//   createCard(Rank.Queen, Suit.Diamonds),\n// ];\n// const playerHandFull = [...hand1, ...communityCards];\n// const resultFull = evaluator.evaluateHand(playerHandFull);\n// console.log(`Full Hand: ${playerHandFull.map(c=>c.toString())} -> Rank: ${resultFull.rank}, Value: ${resultFull.value}, Name: ${resultFull.handName}`);\n","import { Card, createCard, Rank, Suit } from './Card';\nimport { Deck } from './Deck';\nimport { Player } from './Player';\nimport { HandEvaluator, HandEvaluationResult, HAND_RANKS } from './HandEvaluator';\n\nexport enum BettingRound {\n  Preflop,\n  Flop,\n  Turn,\n  River,\n  Showdown,\n  GameOver,\n}\n\nexport class GameState {\n  players: Player[];\n  deck: Deck;\n  communityCards: Card[];\n  pot: number;\n  currentPlayerIndex: number; // Index within activePlayers\n  currentRoundBet: number; // Highest total bet made by any player in this round\n  bettingRound: BettingRound;\n  dealerIndex: number; // Index within the main players array (who has the button)\n  handEvaluator: HandEvaluator;\n  minRaiseAmount: number; // Minimum additional amount for a raise\n  bigBlind: number;\n  smallBlind: number;\n  activePlayers: Player[]; // Players currently in the hand (not folded, have chips)\n  lastPlayerToRaiseId?: string; // ID of the player who made the last aggressive action (bet/raise)\n\n  constructor(playerNames: string[], initialChips: number, sb: number = 5, bb: number = 10) {\n    this.players = playerNames.map((name, index) => new Player(`p${index}`, name, initialChips));\n    this.deck = new Deck();\n    this.handEvaluator = new HandEvaluator();\n    this.smallBlind = sb;\n    this.bigBlind = bb;\n    this.minRaiseAmount = bb;\n\n    this.dealerIndex = -1;\n    this.communityCards = [];\n    this.pot = 0;\n    this.currentPlayerIndex = 0;\n    this.currentRoundBet = 0;\n    this.bettingRound = BettingRound.Preflop;\n    this.activePlayers = [];\n  }\n\n  setupNewHand(): void {\n    this.deck.reset();\n    this.communityCards = [];\n    this.pot = 0;\n    this.currentRoundBet = 0;\n    this.minRaiseAmount = this.bigBlind;\n    this.lastPlayerToRaiseId = undefined;\n\n    this.players.forEach(p => p.clearHand()); // Resets hand, folded, currentBet, isAllIn\n    this.activePlayers = this.players.filter(p => p.chips > 0);\n\n    if (this.activePlayers.length < 2) {\n      this.bettingRound = BettingRound.GameOver;\n      console.log(\"Game Over: Not enough players with chips.\");\n      return;\n    }\n\n    // Rotate dealer button among ALL players, then find active players for blinds\n    this.dealerIndex = (this.dealerIndex + 1) % this.players.length;\n    \n    // Determine SB and BB players from active players relative to dealer\n    // This needs to correctly find active players in sequence after the dealer button.\n    let sbPos = (this.dealerIndex + 1) % this.players.length;\n    while(!this.activePlayers.find(p => p.id === this.players[sbPos].id) || this.players[sbPos].chips === 0) {\n        sbPos = (sbPos + 1) % this.players.length;\n    }\n    let bbPos = (sbPos + 1) % this.players.length;\n    while(!this.activePlayers.find(p => p.id === this.players[bbPos].id) || this.players[bbPos].chips === 0) {\n        bbPos = (bbPos + 1) % this.players.length;\n    }\n\n    const sbPlayer = this.players[sbPos];\n    const bbPlayer = this.players[bbPos];\n\n    console.log(`Dealer is ${this.players[this.dealerIndex].name}`);\n\n    // Post blinds by adding to pot and updating player's currentBet\n    this.pot += sbPlayer.bet(this.smallBlind); // bet() updates player.currentBet and player.chips\n    console.log(`${sbPlayer.name} posts small blind ${this.smallBlind}. CurrentBet: ${sbPlayer.currentBet}`);\n    this.pot += bbPlayer.bet(this.bigBlind);\n    console.log(`${bbPlayer.name} posts big blind ${this.bigBlind}. CurrentBet: ${bbPlayer.currentBet}`);\n    \n    this.currentRoundBet = this.bigBlind; // The current bet to match is the big blind\n    this.lastPlayerToRaiseId = bbPlayer.id; // BB is effectively the first \"raiser\"\n\n    // Determine player to act first (UTG)\n    let utgPos = (bbPos + 1) % this.players.length;\n    while(!this.activePlayers.find(p => p.id === this.players[utgPos].id) || this.players[utgPos].chips === 0) {\n        utgPos = (utgPos + 1) % this.players.length;\n         if (utgPos === bbPos) break; // Safety for very few players\n    }\n    this.currentPlayerIndex = this.activePlayers.findIndex(p => p.id === this.players[utgPos].id);\n    \n    this.bettingRound = BettingRound.Preflop;\n    console.log(`New hand. Dealer: ${this.players[this.dealerIndex].name}. SB: ${sbPlayer.name}, BB: ${bbPlayer.name}.`);\n    if(this.currentPlayerIndex !== -1) console.log(`Action starts with: ${this.activePlayers[this.currentPlayerIndex].name}.`);\n    else console.log(\"Error determining first player to act.\");\n  }\n\n  dealHands(): void { /* ... no change ... */ \n    if (this.bettingRound !== BettingRound.Preflop) return;\n    console.log(\"Dealing hands...\");\n    for (let i = 0; i < 2; i++) { \n      for (const player of this.activePlayers) { \n        if (!player.folded && player.chips > 0) { \n            const card = this.deck.deal();\n            if (card) player.receiveCard(card);\n        }\n      }\n    }\n    this.activePlayers.forEach(p => {\n        if (!p.folded) console.log(`${p.name} has: ${p.hand.map(c => c.toString()).join(', ')}`);\n    });\n  }\n  dealFlop(): void { /* ... no change ... */ \n    if (this.bettingRound !== BettingRound.Flop) return;\n    console.log(\"Dealing flop...\");\n    this.deck.deal(); \n    for (let i = 0; i < 3; i++) {\n      const card = this.deck.deal();\n      if (card) this.communityCards.push(card);\n    }\n    console.log(`Flop: ${this.communityCards.map(c => c.toString()).join(', ')}`);\n  }\n  dealTurn(): void { /* ... no change ... */ \n    if (this.bettingRound !== BettingRound.Turn) return;\n    console.log(\"Dealing turn...\");\n    this.deck.deal(); \n    const card = this.deck.deal();\n    if (card) this.communityCards.push(card);\n    console.log(`Turn: ${this.communityCards[this.communityCards.length -1].toString()} (Board: ${this.communityCards.map(c=>c.toString()).join(', ')})`);\n  }\n  dealRiver(): void { /* ... no change ... */ \n    if (this.bettingRound !== BettingRound.River) return;\n    console.log(\"Dealing river...\");\n    this.deck.deal(); \n    const card = this.deck.deal();\n    if (card) this.communityCards.push(card);\n    console.log(`River: ${this.communityCards[this.communityCards.length -1].toString()} (Board: ${this.communityCards.map(c=>c.toString()).join(', ')})`);\n  }\n  \n  private collectBetsAndStartNextRound(): void {\n    // Pot was already updated incrementally by handlePlayerAction.\n    // Bets are on player.currentBet. This method finalizes them for the round.\n    console.log(\"Collecting bets for the round.\");\n    // this.activePlayers.filter(p => !p.folded).forEach(player => {\n    //     // Pot already includes these amounts if handlePlayerAction updates pot directly\n    //     // If not, this is where you'd add player.currentBet to pot.\n    //     // player.currentBet = 0; // Reset for next round\n    // });\n    // currentRoundBet and minRaiseAmount are reset here before next round dealing.\n    this.currentRoundBet = 0;\n    this.minRaiseAmount = this.bigBlind;\n    this.lastPlayerToRaiseId = undefined; \n    this.activePlayers.filter(p => !p.folded).forEach(p => p.currentBet = 0);\n\n\n    // Determine first player to act in post-flop rounds (typically SB or first active player left of dealer)\n    // The dealerIndex here is from the main `this.players` array.\n    let firstToActGlobalIndex = (this.dealerIndex + 1) % this.players.length;\n    while(!this.activePlayers.find(p => p.id === this.players[firstToActGlobalIndex].id) || this.players[firstToActGlobalIndex].folded || this.players[firstToActGlobalIndex].isAllIn) {\n        firstToActGlobalIndex = (firstToActGlobalIndex + 1) % this.players.length;\n        if (firstToActGlobalIndex === (this.dealerIndex + 1) % this.players.length) break; // Safety break\n    }\n    this.currentPlayerIndex = this.activePlayers.findIndex(p => p.id === this.players[firstToActGlobalIndex].id);\n\n\n    switch (this.bettingRound) {\n      case BettingRound.Preflop:\n        this.bettingRound = BettingRound.Flop; this.dealFlop(); break;\n      case BettingRound.Flop:\n        this.bettingRound = BettingRound.Turn; this.dealTurn(); break;\n      case BettingRound.Turn:\n        this.bettingRound = BettingRound.River; this.dealRiver(); break;\n      case BettingRound.River:\n        this.bettingRound = BettingRound.Showdown; this.determineWinner(); break;\n      default: console.log(\"Cannot start next betting round from current state:\", this.bettingRound); return;\n    }\n\n     if (this.bettingRound !== BettingRound.Showdown && this.bettingRound !== BettingRound.GameOver) {\n        if (this.currentPlayerIndex !== -1 && this.activePlayers[this.currentPlayerIndex]) {\n            console.log(`Starting ${BettingRound[this.bettingRound]} betting round. ${this.activePlayers[this.currentPlayerIndex].name} to act.`);\n        } else if (this.activePlayers.filter(p => !p.folded && !p.isAllIn).length > 0) {\n            // If firstToAct was all-in, find next available player.\n            // This case should be rare if firstToActGlobalIndex correctly skips all-in players.\n            this.currentPlayerIndex = this.activePlayers.findIndex(p => !p.folded && !p.isAllIn);\n            if(this.currentPlayerIndex !== -1) console.log(`Starting ${BettingRound[this.bettingRound]} betting round. ${this.activePlayers[this.currentPlayerIndex].name} to act (first was all-in/folded).`);\n            else { // All remaining are all-in, auto-progress\n                 console.log(`${BettingRound[this.bettingRound]} betting round, but all players are all-in or folded. Proceeding.`);\n                 this.collectBetsAndStartNextRound(); // Effectively skip betting on this street\n            }\n        } else {\n             console.log(`${BettingRound[this.bettingRound]} betting round, but no player can act. Proceeding to showdown/end.`);\n             this.bettingRound = BettingRound.Showdown; this.determineWinner();\n        }\n    }\n  }\n\n  handlePlayerAction(playerId: string, action: 'fold' | 'check' | 'call' | 'bet' | 'raise', amount?: number): boolean {\n    const player = this.activePlayers.find(p => p.id === playerId);\n    if (!player || player.id !== this.activePlayers[this.currentPlayerIndex]?.id) {\n        console.error(`Action by wrong player (${playerId}) or player not found. Current is ${this.activePlayers[this.currentPlayerIndex]?.id}`);\n        return false;\n    }\n    if (player.folded || player.isAllIn) {\n        console.log(`Player ${player.name} cannot act (folded/all-in). Advancing.`);\n        this.advanceToNextPlayerOrRound();\n        return false;\n    }\n\n    let chipsCommitted = 0; // How much this player added to pot in this action\n\n    switch (action) {\n      case 'fold':\n        player.fold();\n        console.log(`${player.name} folds.`);\n        break;\n      case 'check':\n        if (player.currentBet < this.currentRoundBet) {\n          console.log(`${player.name} cannot check, current bet is ${this.currentRoundBet}. Must call ${this.currentRoundBet - player.currentBet} or raise.`);\n          return false; \n        }\n        console.log(`${player.name} checks.`);\n        break;\n      case 'call':\n        if (player.currentBet >= this.currentRoundBet) {\n             console.log(`${player.name} tries to call but has already matched the bet or bet more. Interpreting as check.`);\n             // Treat as check if already matched/exceeded\n        } else {\n            chipsCommitted = player.call(this.currentRoundBet); // call() updates player.currentBet and player.chips\n            this.pot += chipsCommitted;\n            console.log(`${player.name} calls ${chipsCommitted}. Player total bet this round: ${player.currentBet}`);\n        }\n        break;\n      case 'bet':\n        if (this.currentRoundBet > 0) {\n          console.log(`${player.name} cannot bet, currentRoundBet is ${this.currentRoundBet}. Must call or raise.`);\n          return false;\n        }\n        if (!amount || amount <= 0) { console.log(\"Bet amount invalid.\"); return false;}\n        if (amount < this.minRaiseAmount && player.chips > amount) { // Allow all-in for less\n            console.log(`${player.name} bet amount ${amount} is less than min bet ${this.minRaiseAmount}.`);\n            return false;\n        }\n        chipsCommitted = player.bet(amount); // bet() updates player.currentBet and player.chips\n        this.pot += chipsCommitted;\n        this.currentRoundBet = player.currentBet;\n        this.minRaiseAmount = amount; // The bet amount becomes the new minimum raise amount on top for next player\n        this.lastPlayerToRaiseId = player.id;\n        console.log(`${player.name} bets ${chipsCommitted}. CurrentRoundBet: ${this.currentRoundBet}. MinRaise: ${this.minRaiseAmount}`);\n        break;\n      case 'raise':\n        if (this.currentRoundBet === 0) { console.log(\"Cannot raise, no bet yet. Use 'bet'.\"); return false; }\n        if (!amount || amount <= 0) { console.log(\"Raise amount invalid.\"); return false;}\n        \n        const totalNewBet = this.currentRoundBet + amount; // `amount` is the raise ON TOP of currentRoundBet\n        // Min raise validation: The raise amount must be at least minRaiseAmount\n        if (amount < this.minRaiseAmount && player.chips > totalNewBet) { // Allow all-in for less\n            console.log(`${player.name} raise amount ${amount} is less than min raise amount ${this.minRaiseAmount}.`);\n            return false;\n        }\n        // Player.raise expects the \"additional amount\" and \"what they are raising over\"\n        // Here, 'amount' is the additional amount.\n        chipsCommitted = player.raise(amount, this.currentRoundBet); \n        this.pot += chipsCommitted;\n        this.currentRoundBet = player.currentBet; // player.currentBet is now the new total highest bet\n        this.minRaiseAmount = amount; // The 'additional amount' of the raise is the new minRaiseAmount\n        this.lastPlayerToRaiseId = player.id;\n        console.log(`${player.name} raises by ${amount} to ${this.currentRoundBet}. MinRaise for next: ${this.minRaiseAmount}`);\n        break;\n      default:\n        console.error(\"Unknown action:\", action);\n        return false;\n    }\n    this.advanceToNextPlayerOrRound();\n    return true;\n  }\n\n  advanceToNextPlayerOrRound(): void {\n    const nonFoldedPlayers = this.activePlayers.filter(p => !p.folded);\n    if (nonFoldedPlayers.length === 1) {\n      this.awardPotToWinner(nonFoldedPlayers[0]);\n      this.setupNewHand();\n      return;\n    }\n\n    // Determine if all active players have had a chance to act after the last raise.\n    // Or if all players have matched currentRoundBet or are all-in.\n    let nextActorIndex = (this.currentPlayerIndex + 1) % this.activePlayers.length;\n    while(this.activePlayers[nextActorIndex].folded || this.activePlayers[nextActorIndex].isAllIn) {\n        nextActorIndex = (nextActorIndex + 1) % this.activePlayers.length;\n        // Safety: if it loops back to current player, means everyone else is folded/allin\n        if (nextActorIndex === this.currentPlayerIndex) break; \n    }\n    \n    // Check if the betting round is over\n    // Round ends if:\n    // 1. All non-folded players are all-in.\n    // 2. All non-folded players have had a turn and their currentBet matches currentRoundBet,\n    //    AND the action is back to the player who made the last aggressive action (or would be if they weren't all-in/folded),\n    //    OR if only one player is left who is not all-in.\n    //    A simpler check: current player is the one who made the last raise, and everyone else has called or folded.\n    //    Or, everyone has checked around.\n    \n    const playerWhoWasLastToRaise = this.activePlayers.find(p => p.id === this.lastPlayerToRaiseId);\n    const indexOfLastRaiser = playerWhoWasLastToRaise ? this.activePlayers.indexOf(playerWhoWasLastToRaise) : -1;\n\n    // If next player to act IS the last aggressor, or would be if they could act (they are all-in)\n    // AND all other non-folded players have currentBet === currentRoundBet\n    const allOthersMatched = nonFoldedPlayers.every(p => p.id === this.lastPlayerToRaiseId || p.currentBet === this.currentRoundBet || p.isAllIn || p.folded);\n\n    if (this.lastPlayerToRaiseId && this.activePlayers[nextActorIndex].id === this.lastPlayerToRaiseId && allOthersMatched) {\n         console.log(\"Betting round ended. Action back to last raiser who has already acted or all matched.\");\n         this.collectBetsAndStartNextRound();\n         return;\n    }\n    // Case: Everyone checks around (currentRoundBet is 0 and action is back to where it would be after BB)\n    if (this.currentRoundBet === 0 && this.lastPlayerToRaiseId === undefined) { // No bets yet in this round\n        // If action is about to return to the player who would have been opener (e.g. UTG preflop, SB postflop)\n        // This needs a concept of \"who opened action this round\" or \"has everyone had a turn\"\n        // For now, a simpler check: if the next player is the one who started this round of betting\n        // (e.g. SB post-flop, or UTG pre-flop) then if they check, round is over.\n        // This is complex. A simpler check: if the next player to act has already matched the currentRoundBet (which is 0)\n        // and it's not the very first action of the round.\n        // A common way: if player `nextActorIndex` has already had a turn to act against the current `currentRoundBet`.\n        // If `this.activePlayers[nextActorIndex].currentBet === this.currentRoundBet` AND they are not the BB who hasn't acted on option yet preflop.\n        // For simplicity, if nextActorIndex IS the player who would be the last to act if everyone called/checked (e.g. BB preflop, button postflop)\n        // AND their currentBet matches currentRoundBet, the round ends.\n        // This requires more state tracking (e.g. hasActedThisRound flags per player).\n        // The condition `allNonFoldedMatchedOrAllIn` from previous `nextPlayer` version combined with `playersToAct.length === 0` is often used.\n        const playersWhoCanStillAct = nonFoldedPlayers.filter(p => !p.isAllIn && p.currentBet < this.currentRoundBet);\n        if (playersWhoCanStillAct.length === 0 && nonFoldedPlayers.every(p => p.currentBet === this.currentRoundBet || p.isAllIn || p.folded)) {\n            console.log(\"Betting round ended. All players matched, are all-in, or folded.\");\n            this.collectBetsAndStartNextRound();\n            return;\n        }\n    }\n\n\n    this.currentPlayerIndex = nextActorIndex;\n    if (this.currentPlayerIndex !== -1 && this.activePlayers[this.currentPlayerIndex]) {\n         console.log(`Next to act: ${this.activePlayers[this.currentPlayerIndex].name}`);\n    } else {\n        console.error(\"Could not determine next player. Ending round.\");\n        this.collectBetsAndStartNextRound();\n    }\n  }\n  \n  private awardPotToWinner(winner: Player): void { /* ... no change ... */ \n    console.log(`${winner.name} wins the pot of ${this.pot}!`);\n    winner.winPot(this.pot);\n    this.pot = 0;\n  }\n  determineWinner(): void { /* ... no change ... */ \n    if (this.bettingRound !== BettingRound.Showdown) return;\n    console.log(\"Determining winner...\");\n    const contenders = this.activePlayers.filter(p => !p.folded);\n    if (contenders.length === 0) { this.bettingRound = BettingRound.GameOver; this.setupNewHand(); return; } // Call setupNewHand if game not over\n    if (contenders.length === 1) { this.awardPotToWinner(contenders[0]); this.setupNewHand(); return; }\n\n    let bestHandResults: { player: Player, eval: HandEvaluationResult }[] = [];\n    contenders.forEach(player => {\n      const allCards = [...player.hand, ...this.communityCards]; \n      const currentEval = this.handEvaluator.evaluateHand(allCards); \n      console.log(`${player.name} has ${player.hand.map(c=>c.toString())} (Board: ${this.communityCards.map(c=>c.toString())}) - ${currentEval.handName} (Value: ${currentEval.value})`);\n      if (bestHandResults.length === 0 || currentEval.rank > bestHandResults[0].eval.rank) {\n        bestHandResults = [{ player, eval: currentEval }];\n      } else if (currentEval.rank === bestHandResults[0].eval.rank) {\n        let tie = false;\n        for (let i = 0; i < currentEval.value.length; i++) {\n          if (currentEval.value[i] > bestHandResults[0].eval.value[i]) { bestHandResults = [{ player, eval: currentEval }]; tie = false; break; }\n          if (currentEval.value[i] < bestHandResults[0].eval.value[i]) { tie = false; break; }\n          if (i === currentEval.value.length - 1) tie = true;\n        }\n        if (tie) bestHandResults.push({ player, eval: currentEval });\n      }\n    });\n\n    if (bestHandResults.length > 0) {\n        if (bestHandResults.length === 1) this.awardPotToWinner(bestHandResults[0].player);\n        else {\n            const winners = bestHandResults.map(r => r.player.name).join(', ');\n            console.log(`Split pot between: ${winners} with ${bestHandResults[0].eval.handName}`);\n            const splitAmount = Math.floor(this.pot / bestHandResults.length);\n            bestHandResults.forEach(res => res.player.winPot(splitAmount));\n            this.pot = 0; \n        }\n    } else console.log(\"Error: Could not determine a winner.\");\n    console.log(\"Showdown finished.\");\n    this.setupNewHand(); \n  }\n\n  // --- Serialization methods ---\n  public toJSON(): object { /* ... no change ... */ \n    return {\n        players: this.players.map(p => p.toJSON()), \n        communityCards: this.communityCards.map(c => ({ rank: c.rank, suit: c.suit })), \n        pot: this.pot,\n        currentActivePlayerId: this.activePlayers[this.currentPlayerIndex]?.id,\n        currentRoundBet: this.currentRoundBet,\n        bettingRound: this.bettingRound,\n        dealerIndex: this.dealerIndex, \n        minRaiseAmount: this.minRaiseAmount, // Changed from minRaise\n        bigBlind: this.bigBlind,\n        smallBlind: this.smallBlind,\n        lastPlayerToRaiseId: this.lastPlayerToRaiseId,\n    };\n  }\n  public static fromJSON(json: any, localPlayerActualId: string): GameState { /* ... no change ... */ \n    const gs = new GameState([], 0, json.smallBlind, json.bigBlind); \n    gs.players = json.players.map((pData: any) => {\n        const name = pData.id === localPlayerActualId ? \"You\" : `Peer (${pData.id})`;\n        const player = Player.fromJSON(pData); \n        player.name = name; \n        return player;\n    });\n    gs.communityCards = json.communityCards.map((c: {rank: Rank, suit: Suit}) => createCard(c.rank, c.suit));\n    gs.pot = json.pot;\n    gs.dealerIndex = json.dealerIndex; \n    gs.activePlayers = gs.players.filter(p => p.chips > 0 && !p.folded); \n    const activePlayerFromSignal = gs.activePlayers.find(p => p.id === json.currentActivePlayerId);\n    if (activePlayerFromSignal) gs.currentPlayerIndex = gs.activePlayers.indexOf(activePlayerFromSignal);\n    else if (gs.activePlayers.length > 0) gs.currentPlayerIndex = 0; \n    else gs.currentPlayerIndex = -1; \n    gs.currentRoundBet = json.currentRoundBet;\n    gs.bettingRound = json.bettingRound;\n    gs.minRaiseAmount = json.minRaiseAmount || json.bigBlind; // fallback for older states\n    gs.lastPlayerToRaiseId = json.lastPlayerToRaiseId;\n    console.log(\"GameState hydrated from JSON:\", gs);\n    return gs;\n  }\n  public updateFromJSON(json: any, localPlayerActualId: string): void { /* ... no change ... */ \n    json.players.forEach((pData: any) => {\n        const localPlayer = this.players.find(p => p.id === pData.id);\n        if (localPlayer) {\n            localPlayer.updateFromJSON(pData); \n            localPlayer.name = pData.id === localPlayerActualId ? \"You\" : `Peer (${pData.id})`;\n        } else console.warn(`Player with id ${pData.id} from JSON not found locally.`);\n    });\n    this.communityCards = json.communityCards.map((c: {rank: Rank, suit: Suit}) => createCard(c.rank, c.suit));\n    this.pot = json.pot;\n    this.activePlayers = this.players.filter(p => p.chips > 0 && !p.folded);\n    const activePlayerFromSignal = this.activePlayers.find(p => p.id === json.currentActivePlayerId);\n    if (activePlayerFromSignal) this.currentPlayerIndex = this.activePlayers.indexOf(activePlayerFromSignal);\n    else if (this.activePlayers.length > 0) this.currentPlayerIndex = 0;\n    else this.currentPlayerIndex = -1;\n    this.currentRoundBet = json.currentRoundBet;\n    this.bettingRound = json.bettingRound;\n    this.minRaiseAmount = json.minRaiseAmount || json.bigBlind;\n    this.lastPlayerToRaiseId = json.lastPlayerToRaiseId;\n    console.log(\"GameState updated by peer data.\");\n  }\n}\n","import { Card, Suit, Rank } from './Card';\nimport { Player } from './Player';\nimport { GameState } from './GameState'; // For pot size, later for more specific states\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\n// Card dimensions and styling\nconst CARD_WIDTH = 60;\nconst CARD_HEIGHT = 90;\nconst CARD_RX = 5; // Border radius\nconst CARD_STROKE = \"black\";\nconst CARD_FILL = \"white\";\nconst TEXT_FILL = \"black\";\nconst SUIT_COLORS: { [key in Suit]: string } = {\n    [Suit.Hearts]: \"red\",\n    [Suit.Diamonds]: \"red\",\n    [Suit.Clubs]: \"black\",\n    [Suit.Spades]: \"black\",\n};\n\nexport class SVGGraphics {\n    private svg: SVGSVGElement;\n    private gameContainer: HTMLElement;\n\n    constructor(containerId: string = \"game-container\") {\n        const container = document.getElementById(containerId);\n        if (!container) {\n            throw new Error(`Container with id \"${containerId}\" not found.`);\n        }\n        this.gameContainer = container;\n\n        // Create SVG element\n        this.svg = document.createElementNS(SVG_NS, \"svg\");\n        this.svg.setAttribute(\"width\", this.gameContainer.style.width || \"800\");\n        this.svg.setAttribute(\"height\", this.gameContainer.style.height || \"600\");\n        this.svg.setAttribute(\"viewBox\", `0 0 ${this.gameContainer.style.width || 800} ${this.gameContainer.style.height || 600}`);\n        this.gameContainer.appendChild(this.svg);\n\n        this.defineGlobalStyles();\n    }\n\n    private defineGlobalStyles(): void {\n        const defs = document.createElementNS(SVG_NS, \"defs\");\n        const style = document.createElementNS(SVG_NS, \"style\");\n        style.textContent = `\n            .card-rect {\n                stroke: ${CARD_STROKE};\n                stroke-width: 1;\n                fill: ${CARD_FILL};\n                rx: ${CARD_RX};\n            }\n            .card-text {\n                font-family: sans-serif;\n                font-size: 18px;\n                text-anchor: middle;\n                dominant-baseline: middle;\n            }\n            .player-info-text {\n                font-family: sans-serif;\n                font-size: 14px;\n                fill: white; /* Changed to white for better visibility on dark green */\n                text-anchor: middle; /* Centering player name/chips */\n            }\n            .bet-text { /* Specific style for bet amounts */\n                font-family: sans-serif;\n                font-size: 12px;\n                fill: yellow; \n                text-anchor: middle;\n            }\n            .pot-text {\n                font-family: sans-serif;\n                font-size: 18px;\n                fill: yellow;\n                text-anchor: middle;\n            }\n            .folded-text {\n                font-family: sans-serif;\n                font-size: 16px;\n                fill: orange;\n                text-anchor: middle;\n                dominant-baseline: middle;\n            }\n        `;\n        defs.appendChild(style);\n        this.svg.appendChild(defs);\n    }\n    \n    private clearContent(): void {\n        const children = Array.from(this.svg.children);\n        for (const child of children) {\n            if (child.tagName.toLowerCase() !== 'defs') {\n                this.svg.removeChild(child);\n            }\n        }\n    }\n\n    drawCard(card: Card, x: number, y: number, id?: string, hidden: boolean = false): SVGGElement {\n        const group = document.createElementNS(SVG_NS, \"g\");\n        if (id) group.setAttribute(\"id\", id);\n        group.setAttribute(\"transform\", `translate(${x}, ${y})`);\n        group.classList.add(\"card-svg-group\");\n\n        const rect = document.createElementNS(SVG_NS, \"rect\");\n        rect.setAttribute(\"width\", CARD_WIDTH.toString());\n        rect.setAttribute(\"height\", CARD_HEIGHT.toString());\n        rect.classList.add(\"card-rect\");\n        if (hidden) {\n            rect.setAttribute(\"fill\", \"darkslateblue\"); // Color for hidden card back\n        }\n        group.appendChild(rect);\n\n        const textContent = hidden ? \"??\" : card.toString();\n        const textColor = hidden ? \"white\" : SUIT_COLORS[card.suit];\n\n        const text = document.createElementNS(SVG_NS, \"text\");\n        text.setAttribute(\"x\", (CARD_WIDTH / 2).toString());\n        text.setAttribute(\"y\", (CARD_HEIGHT / 2).toString());\n        text.classList.add(\"card-text\");\n        text.style.fill = textColor;\n        text.textContent = textContent;\n        group.appendChild(text);\n\n        this.svg.appendChild(group);\n        return group;\n    }\n\n    drawTable(players: Player[], communityCards: Card[], pot: number): void {\n        this.clearContent(); \n\n        const svgWidth = parseFloat(this.svg.getAttribute(\"width\") || \"800\");\n        const svgHeight = parseFloat(this.svg.getAttribute(\"height\") || \"600\");\n\n        // Community Cards\n        const numCommCards = communityCards.length;\n        const communityTotalWidth = numCommCards * CARD_WIDTH + Math.max(0, numCommCards - 1) * 10;\n        const communityStartX = (svgWidth - communityTotalWidth) / 2;\n        const communityY = svgHeight / 2 - CARD_HEIGHT / 2 - 30; \n        communityCards.forEach((card, index) => {\n            this.drawCard(card, communityStartX + index * (CARD_WIDTH + 10), communityY, `community-card-${index}`);\n        });\n\n        // Players\n        const numPlayers = players.length;\n        const tableRadiusX = svgWidth * 0.4; \n        const tableRadiusY = svgHeight * 0.3;\n        const centerX = svgWidth / 2;\n        const centerY = svgHeight / 2 + 30; \n\n        players.forEach((player, index) => {\n            const angle = (index / numPlayers) * 2 * Math.PI - Math.PI / 2; \n            const playerBaseX = centerX + tableRadiusX * Math.cos(angle);\n            const playerBaseY = centerY + tableRadiusY * Math.sin(angle);\n\n            // Player Info Text (Name, Chips)\n            const playerInfo = document.createElementNS(SVG_NS, \"text\");\n            playerInfo.setAttribute(\"x\", playerBaseX.toString());\n            playerInfo.setAttribute(\"y\", (playerBaseY - CARD_HEIGHT * 0.5 - 15).toString()); // Above cards\n            playerInfo.classList.add(\"player-info-text\");\n            playerInfo.textContent = `${player.name}: ${player.chips}`;\n            this.svg.appendChild(playerInfo);\n            \n            // Player Bets\n            if(player.currentBet > 0){\n                const betText = document.createElementNS(SVG_NS, \"text\");\n                betText.setAttribute(\"x\", playerBaseX.toString());\n                betText.setAttribute(\"y\", (playerBaseY + CARD_HEIGHT * 0.5 + 20).toString()); // Below cards\n                betText.classList.add(\"bet-text\");\n                betText.textContent = `Bet: ${player.currentBet}`;\n                this.svg.appendChild(betText);\n            }\n\n            // Player Cards\n            const cardXOffset = -CARD_WIDTH * 0.8; // Start left for two cards\n            player.hand.forEach((card, cardIndex) => {\n                // For a two player game, one player is 'You', other is 'Peer'\n                // Hide Peer's cards unless it's showdown (not implemented yet)\n                const shouldHide = player.name.toLowerCase().includes(\"peer\"); \n                this.drawCard(\n                    card,\n                    playerBaseX + cardXOffset + cardIndex * (CARD_WIDTH + 5), \n                    playerBaseY - CARD_HEIGHT * 0.5,\n                    `player-${player.id}-card-${cardIndex}`,\n                    shouldHide && !player.folded // Don't hide if folded (show back or nothing)\n                                                // This simple hide logic will need to be tied to showdown state\n                );\n            });\n            \n            if (player.folded) {\n                const foldedText = document.createElementNS(SVG_NS, \"text\");\n                // Position FOLDED text over where cards would be\n                foldedText.setAttribute(\"x\", (playerBaseX - CARD_WIDTH * 0.3).toString()); \n                foldedText.setAttribute(\"y\", playerBaseY.toString());\n                foldedText.classList.add(\"folded-text\");\n                foldedText.textContent = \"FOLDED\";\n                this.svg.appendChild(foldedText);\n            }\n        });\n\n        // Pot size\n        const potText = document.createElementNS(SVG_NS, \"text\");\n        potText.setAttribute(\"x\", (svgWidth / 2).toString());\n        potText.setAttribute(\"y\", (communityY + CARD_HEIGHT + 30).toString()); // Below community cards\n        potText.classList.add(\"pot-text\");\n        potText.textContent = `Pot: ${pot}`;\n        this.svg.appendChild(potText);\n    }\n\n    public getSVGElement(): SVGSVGElement {\n        return this.svg;\n    }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '')\n\t\t\t.trim()\n\t\t\t.replace(/\\s+/g, ',')\n\t\t\t.split(',')\n\t\t\t.filter(Boolean);\n\n\t\tfor (const ns of split) {\n\t\t\tif (ns[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(ns.slice(1));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(ns);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the given string matches a namespace template, honoring\n\t * asterisks as wildcards.\n\t *\n\t * @param {String} search\n\t * @param {String} template\n\t * @return {Boolean}\n\t */\n\tfunction matchesTemplate(search, template) {\n\t\tlet searchIndex = 0;\n\t\tlet templateIndex = 0;\n\t\tlet starIndex = -1;\n\t\tlet matchIndex = 0;\n\n\t\twhile (searchIndex < search.length) {\n\t\t\tif (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === '*')) {\n\t\t\t\t// Match character or proceed with wildcard\n\t\t\t\tif (template[templateIndex] === '*') {\n\t\t\t\t\tstarIndex = templateIndex;\n\t\t\t\t\tmatchIndex = searchIndex;\n\t\t\t\t\ttemplateIndex++; // Skip the '*'\n\t\t\t\t} else {\n\t\t\t\t\tsearchIndex++;\n\t\t\t\t\ttemplateIndex++;\n\t\t\t\t}\n\t\t\t} else if (starIndex !== -1) { // eslint-disable-line no-negated-condition\n\t\t\t\t// Backtrack to the last '*' and try to match more characters\n\t\t\t\ttemplateIndex = starIndex + 1;\n\t\t\t\tmatchIndex++;\n\t\t\t\tsearchIndex = matchIndex;\n\t\t\t} else {\n\t\t\t\treturn false; // No match\n\t\t\t}\n\t\t}\n\n\t\t// Handle trailing '*' in template\n\t\twhile (templateIndex < template.length && template[templateIndex] === '*') {\n\t\t\ttemplateIndex++;\n\t\t}\n\n\t\treturn templateIndex === template.length;\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names,\n\t\t\t...createDebug.skips.map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tfor (const skip of createDebug.skips) {\n\t\t\tif (matchesTemplate(name, skip)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const ns of createDebug.names) {\n\t\t\tif (matchesTemplate(name, ns)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\t// eslint-disable-next-line no-return-assign\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug') || exports.storage.getItem('DEBUG') ;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","// originally pulled out of simple-peer\n\nmodule.exports = function getBrowserRTC () {\n  if (typeof globalThis === 'undefined') return null\n  var wrtc = {\n    RTCPeerConnection: globalThis.RTCPeerConnection || globalThis.mozRTCPeerConnection ||\n      globalThis.webkitRTCPeerConnection,\n    RTCSessionDescription: globalThis.RTCSessionDescription ||\n      globalThis.mozRTCSessionDescription || globalThis.webkitRTCSessionDescription,\n    RTCIceCandidate: globalThis.RTCIceCandidate || globalThis.mozRTCIceCandidate ||\n      globalThis.webkitRTCIceCandidate\n  }\n  if (!wrtc.RTCPeerConnection) return null\n  return wrtc\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict'\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","export default {}","module.exports = require('events').EventEmitter;\n","'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar _require = require('buffer'),\n  Buffer = _require.Buffer;\nvar _require2 = require('util'),\n  inspect = _require2.inspect;\nvar custom = inspect && inspect.custom || 'inspect';\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\nmodule.exports = /*#__PURE__*/function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n      while (p = p.next) ret += s + p.data;\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes or characters from the buffered data.\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    }\n\n    // Consumes a specified amount of characters from the buffered data.\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Consumes a specified amount of bytes from the buffered data.\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n          break;\n        }\n        ++c;\n      }\n      this.length -= c;\n      return ret;\n    }\n\n    // Make sure the linked list only shows the minimal necessary information.\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread(_objectSpread({}, options), {}, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n  return BufferList;\n}();","'use strict';\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n  return this;\n}\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n    return Math.floor(hwm);\n  }\n\n  // Default value\n  return state.objectMode ? 16 : 16 * 1024;\n}\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n  ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nrequire('inherits')(Writable, Stream);\nfunction nop() {}\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'finish' (and potentially 'end')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex);\n\n  // legacy.\n  this.writable = true;\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END();\n  // TODO: defer error events consistently everywhere, not just the cb\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n  return true;\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n  return ret;\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\nWritable.prototype._writev = null;\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n  return need;\n}\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\nrequire('inherits')(Duplex, Readable);\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  process.nextTick(onEndNT, this);\n}\nfunction onEndNT(self) {\n  self.end();\n}\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    callback.apply(this, args);\n  };\n}\nfunction noop() {}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n  var writableEnded = stream._writableState && stream._writableState.finished;\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n  var onclose = function onclose() {\n    var err;\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\nmodule.exports = eos;","'use strict';\n\nvar _Object$setPrototypeO;\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar finished = require('./end-of-stream');\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n  if (resolve !== null) {\n    var data = iter[kStream].read();\n    // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n  next: function next() {\n    var _this = this;\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    }\n\n    // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n    var lastPromise = this[kLastPromise];\n    var promise;\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n      promise = new Promise(this[kHandlePromise]);\n    }\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject];\n      // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n      iterator[kError] = err;\n      return;\n    }\n    var resolve = iterator[kLastResolve];\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\nmodule.exports = createReadableStreamAsyncIterator;","module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\nvar Buffer = require('buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/buffer_list');\nvar destroyImpl = require('./internal/streams/destroy');\nvar _require = require('./internal/streams/state'),\n  getHighWaterMark = _require.getHighWaterMark;\nvar _require$codes = require('../errors').codes,\n  ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n  ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;\n\n// Lazy loaded to improve the startup performance.\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\nrequire('inherits')(Readable, Stream);\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true;\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = options.emitClose !== false;\n\n  // Should .destroy() be called after 'end' (and potentially 'finish')\n  this.autoDestroy = !!options.autoDestroy;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex);\n\n  // legacy\n  this.readable = true;\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n  Stream.call(this);\n}\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n  return er;\n}\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder;\n  // If setEncoding(null), decoder.encoding equals utf8\n  this._readableState.encoding = this._readableState.decoder.encoding;\n\n  // Iterate over current buffer to convert already stored Buffers:\n  var p = this._readableState.buffer.head;\n  var content = '';\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n  this._readableState.buffer.clear();\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n};\n\n// Don't raise the hwm > 1GB\nvar MAX_HWM = 0x40000000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  }\n\n  // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n  return dest;\n};\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    for (var i = 0; i < len; i++) dests[i].emit('unpipe', this, {\n      hasUnpiped: false\n    });\n    return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0;\n\n    // Try start flowing on next tick if stream isn't explicitly paused\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n  return res;\n};\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true;\n\n    // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n  state.paused = false;\n  return this;\n};\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n  if (!state.reading) {\n    stream.read(0);\n  }\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  this._readableState.paused = true;\n  return this;\n};\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null);\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n  return this;\n};\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n    return createReadableStreamAsyncIterator(this);\n  };\n}\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n});\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length);\n\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n    return from(Readable, iterable, opts);\n  };\n}\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\nvar _require$codes = require('../errors').codes,\n  ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n  ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n  ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\nvar Duplex = require('./_stream_duplex');\nrequire('inherits')(Transform, Duplex);\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\nfunction prefinish() {\n  var _this = this;\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null)\n    // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\nvar Transform = require('./_stream_transform');\nrequire('inherits')(PassThrough, Transform);\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n'use strict';\n\nvar eos;\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\nvar _require$codes = require('../../../errors').codes,\n  ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n  ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true;\n\n    // request.destroy just do .end - .abort is what we want\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\nfunction call(fn) {\n  fn();\n}\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\nmodule.exports = pipeline;","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","'use strict';\n\n/**\n * @typedef {{ [key: string]: any }} Extensions\n * @typedef {Error} Err\n * @property {string} message\n */\n\n/**\n *\n * @param {Error} obj\n * @param {Extensions} props\n * @returns {Error & Extensions}\n */\nfunction assign(obj, props) {\n    for (const key in props) {\n        Object.defineProperty(obj, key, {\n            value: props[key],\n            enumerable: true,\n            configurable: true,\n        });\n    }\n\n    return obj;\n}\n\n/**\n *\n * @param {any} err - An Error\n * @param {string|Extensions} code - A string code or props to set on the error\n * @param {Extensions} [props] - Props to set on the error\n * @returns {Error & Extensions}\n */\nfunction createError(err, code, props) {\n    if (!err || typeof err === 'string') {\n        throw new TypeError('Please pass an Error to err-code');\n    }\n\n    if (!props) {\n        props = {};\n    }\n\n    if (typeof code === 'object') {\n        props = code;\n        code = '';\n    }\n\n    if (code) {\n        props.code = code;\n    }\n\n    try {\n        return assign(err, props);\n    } catch (_) {\n        props.message = err.message;\n        props.stack = err.stack;\n\n        const ErrClass = function () {};\n\n        ErrClass.prototype = Object.create(Object.getPrototypeOf(err));\n\n        // @ts-ignore\n        const output = assign(new ErrClass(), props);\n\n        return output;\n    }\n}\n\nmodule.exports = createError;\n","/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst debug = require('debug')('simple-peer')\nconst getBrowserRTC = require('get-browser-rtc')\nconst randombytes = require('randombytes')\nconst stream = require('readable-stream')\nconst queueMicrotask = require('queue-microtask') // TODO: remove when Node 10 is not supported\nconst errCode = require('err-code')\nconst { Buffer } = require('buffer')\n\nconst MAX_BUFFERED_AMOUNT = 64 * 1024\nconst ICECOMPLETE_TIMEOUT = 5 * 1000\nconst CHANNEL_CLOSING_TIMEOUT = 5 * 1000\n\n// HACK: Filter trickle lines when trickle is disabled #354\nfunction filterTrickle (sdp) {\n  return sdp.replace(/a=ice-options:trickle\\s\\n/g, '')\n}\n\nfunction warn (message) {\n  console.warn(message)\n}\n\n/**\n * WebRTC peer connection. Same API as node core `net.Socket`, plus a few extra methods.\n * Duplex stream.\n * @param {Object} opts\n */\nclass Peer extends stream.Duplex {\n  constructor (opts) {\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts)\n\n    super(opts)\n\n    this._id = randombytes(4).toString('hex').slice(0, 7)\n    this._debug('new peer %o', opts)\n\n    this.channelName = opts.initiator\n      ? opts.channelName || randombytes(20).toString('hex')\n      : null\n\n    this.initiator = opts.initiator || false\n    this.channelConfig = opts.channelConfig || Peer.channelConfig\n    this.channelNegotiated = this.channelConfig.negotiated\n    this.config = Object.assign({}, Peer.config, opts.config)\n    this.offerOptions = opts.offerOptions || {}\n    this.answerOptions = opts.answerOptions || {}\n    this.sdpTransform = opts.sdpTransform || (sdp => sdp)\n    this.streams = opts.streams || (opts.stream ? [opts.stream] : []) // support old \"stream\" option\n    this.trickle = opts.trickle !== undefined ? opts.trickle : true\n    this.allowHalfTrickle = opts.allowHalfTrickle !== undefined ? opts.allowHalfTrickle : false\n    this.iceCompleteTimeout = opts.iceCompleteTimeout || ICECOMPLETE_TIMEOUT\n\n    this.destroyed = false\n    this.destroying = false\n    this._connected = false\n\n    this.remoteAddress = undefined\n    this.remoteFamily = undefined\n    this.remotePort = undefined\n    this.localAddress = undefined\n    this.localFamily = undefined\n    this.localPort = undefined\n\n    this._wrtc = (opts.wrtc && typeof opts.wrtc === 'object')\n      ? opts.wrtc\n      : getBrowserRTC()\n\n    if (!this._wrtc) {\n      if (typeof window === 'undefined') {\n        throw errCode(new Error('No WebRTC support: Specify `opts.wrtc` option in this environment'), 'ERR_WEBRTC_SUPPORT')\n      } else {\n        throw errCode(new Error('No WebRTC support: Not a supported browser'), 'ERR_WEBRTC_SUPPORT')\n      }\n    }\n\n    this._pcReady = false\n    this._channelReady = false\n    this._iceComplete = false // ice candidate trickle done (got null candidate)\n    this._iceCompleteTimer = null // send an offer/answer anyway after some timeout\n    this._channel = null\n    this._pendingCandidates = []\n\n    this._isNegotiating = false // is this peer waiting for negotiation to complete?\n    this._firstNegotiation = true\n    this._batchedNegotiation = false // batch synchronous negotiations\n    this._queuedNegotiation = false // is there a queued negotiation request?\n    this._sendersAwaitingStable = []\n    this._senderMap = new Map()\n    this._closingInterval = null\n\n    this._remoteTracks = []\n    this._remoteStreams = []\n\n    this._chunk = null\n    this._cb = null\n    this._interval = null\n\n    try {\n      this._pc = new (this._wrtc.RTCPeerConnection)(this.config)\n    } catch (err) {\n      this.destroy(errCode(err, 'ERR_PC_CONSTRUCTOR'))\n      return\n    }\n\n    // We prefer feature detection whenever possible, but sometimes that's not\n    // possible for certain implementations.\n    this._isReactNativeWebrtc = typeof this._pc._peerConnectionId === 'number'\n\n    this._pc.oniceconnectionstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onicegatheringstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onconnectionstatechange = () => {\n      this._onConnectionStateChange()\n    }\n    this._pc.onsignalingstatechange = () => {\n      this._onSignalingStateChange()\n    }\n    this._pc.onicecandidate = event => {\n      this._onIceCandidate(event)\n    }\n\n    // HACK: Fix for odd Firefox behavior, see: https://github.com/feross/simple-peer/pull/783\n    if (typeof this._pc.peerIdentity === 'object') {\n      this._pc.peerIdentity.catch(err => {\n        this.destroy(errCode(err, 'ERR_PC_PEER_IDENTITY'))\n      })\n    }\n\n    // Other spec events, unused by this implementation:\n    // - onconnectionstatechange\n    // - onicecandidateerror\n    // - onfingerprintfailure\n    // - onnegotiationneeded\n\n    if (this.initiator || this.channelNegotiated) {\n      this._setupData({\n        channel: this._pc.createDataChannel(this.channelName, this.channelConfig)\n      })\n    } else {\n      this._pc.ondatachannel = event => {\n        this._setupData(event)\n      }\n    }\n\n    if (this.streams) {\n      this.streams.forEach(stream => {\n        this.addStream(stream)\n      })\n    }\n    this._pc.ontrack = event => {\n      this._onTrack(event)\n    }\n\n    this._debug('initial negotiation')\n    this._needsNegotiation()\n\n    this._onFinishBound = () => {\n      this._onFinish()\n    }\n    this.once('finish', this._onFinishBound)\n  }\n\n  get bufferSize () {\n    return (this._channel && this._channel.bufferedAmount) || 0\n  }\n\n  // HACK: it's possible channel.readyState is \"closing\" before peer.destroy() fires\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n  get connected () {\n    return (this._connected && this._channel.readyState === 'open')\n  }\n\n  address () {\n    return { port: this.localPort, family: this.localFamily, address: this.localAddress }\n  }\n\n  signal (data) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot signal after peer is destroyed'), 'ERR_DESTROYED')\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data)\n      } catch (err) {\n        data = {}\n      }\n    }\n    this._debug('signal()')\n\n    if (data.renegotiate && this.initiator) {\n      this._debug('got request to renegotiate')\n      this._needsNegotiation()\n    }\n    if (data.transceiverRequest && this.initiator) {\n      this._debug('got request for transceiver')\n      this.addTransceiver(data.transceiverRequest.kind, data.transceiverRequest.init)\n    }\n    if (data.candidate) {\n      if (this._pc.remoteDescription && this._pc.remoteDescription.type) {\n        this._addIceCandidate(data.candidate)\n      } else {\n        this._pendingCandidates.push(data.candidate)\n      }\n    }\n    if (data.sdp) {\n      this._pc.setRemoteDescription(new (this._wrtc.RTCSessionDescription)(data))\n        .then(() => {\n          if (this.destroyed) return\n\n          this._pendingCandidates.forEach(candidate => {\n            this._addIceCandidate(candidate)\n          })\n          this._pendingCandidates = []\n\n          if (this._pc.remoteDescription.type === 'offer') this._createAnswer()\n        })\n        .catch(err => {\n          this.destroy(errCode(err, 'ERR_SET_REMOTE_DESCRIPTION'))\n        })\n    }\n    if (!data.sdp && !data.candidate && !data.renegotiate && !data.transceiverRequest) {\n      this.destroy(errCode(new Error('signal() called with invalid signal data'), 'ERR_SIGNALING'))\n    }\n  }\n\n  _addIceCandidate (candidate) {\n    const iceCandidateObj = new this._wrtc.RTCIceCandidate(candidate)\n    this._pc.addIceCandidate(iceCandidateObj)\n      .catch(err => {\n        if (!iceCandidateObj.address || iceCandidateObj.address.endsWith('.local')) {\n          warn('Ignoring unsupported ICE candidate.')\n        } else {\n          this.destroy(errCode(err, 'ERR_ADD_ICE_CANDIDATE'))\n        }\n      })\n  }\n\n  /**\n   * Send text/binary data to the remote peer.\n   * @param {ArrayBufferView|ArrayBuffer|Buffer|string|Blob} chunk\n   */\n  send (chunk) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot send after peer is destroyed'), 'ERR_DESTROYED')\n    this._channel.send(chunk)\n  }\n\n  /**\n   * Add a Transceiver to the connection.\n   * @param {String} kind\n   * @param {Object} init\n   */\n  addTransceiver (kind, init) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTransceiver after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTransceiver()')\n\n    if (this.initiator) {\n      try {\n        this._pc.addTransceiver(kind, init)\n        this._needsNegotiation()\n      } catch (err) {\n        this.destroy(errCode(err, 'ERR_ADD_TRANSCEIVER'))\n      }\n    } else {\n      this.emit('signal', { // request initiator to renegotiate\n        type: 'transceiverRequest',\n        transceiverRequest: { kind, init }\n      })\n    }\n  }\n\n  /**\n   * Add a MediaStream to the connection.\n   * @param {MediaStream} stream\n   */\n  addStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addStream()')\n\n    stream.getTracks().forEach(track => {\n      this.addTrack(track, stream)\n    })\n  }\n\n  /**\n   * Add a MediaStreamTrack to the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  addTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot addTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('addTrack()')\n\n    const submap = this._senderMap.get(track) || new Map() // nested Maps map [track, stream] to sender\n    let sender = submap.get(stream)\n    if (!sender) {\n      sender = this._pc.addTrack(track, stream)\n      submap.set(stream, sender)\n      this._senderMap.set(track, submap)\n      this._needsNegotiation()\n    } else if (sender.removed) {\n      throw errCode(new Error('Track has been removed. You should enable/disable tracks that you want to re-add.'), 'ERR_SENDER_REMOVED')\n    } else {\n      throw errCode(new Error('Track has already been added to that stream.'), 'ERR_SENDER_ALREADY_ADDED')\n    }\n  }\n\n  /**\n   * Replace a MediaStreamTrack by another in the connection.\n   * @param {MediaStreamTrack} oldTrack\n   * @param {MediaStreamTrack} newTrack\n   * @param {MediaStream} stream\n   */\n  replaceTrack (oldTrack, newTrack, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot replaceTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('replaceTrack()')\n\n    const submap = this._senderMap.get(oldTrack)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot replace track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    if (newTrack) this._senderMap.set(newTrack, submap)\n\n    if (sender.replaceTrack != null) {\n      sender.replaceTrack(newTrack)\n    } else {\n      this.destroy(errCode(new Error('replaceTrack is not supported in this browser'), 'ERR_UNSUPPORTED_REPLACETRACK'))\n    }\n  }\n\n  /**\n   * Remove a MediaStreamTrack from the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  removeTrack (track, stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeTrack after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSender()')\n\n    const submap = this._senderMap.get(track)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot remove track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    try {\n      sender.removed = true\n      this._pc.removeTrack(sender)\n    } catch (err) {\n      if (err.name === 'NS_ERROR_UNEXPECTED') {\n        this._sendersAwaitingStable.push(sender) // HACK: Firefox must wait until (signalingState === stable) https://bugzilla.mozilla.org/show_bug.cgi?id=1133874\n      } else {\n        this.destroy(errCode(err, 'ERR_REMOVE_TRACK'))\n      }\n    }\n    this._needsNegotiation()\n  }\n\n  /**\n   * Remove a MediaStream from the connection.\n   * @param {MediaStream} stream\n   */\n  removeStream (stream) {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot removeStream after peer is destroyed'), 'ERR_DESTROYED')\n    this._debug('removeSenders()')\n\n    stream.getTracks().forEach(track => {\n      this.removeTrack(track, stream)\n    })\n  }\n\n  _needsNegotiation () {\n    this._debug('_needsNegotiation')\n    if (this._batchedNegotiation) return // batch synchronous renegotiations\n    this._batchedNegotiation = true\n    queueMicrotask(() => {\n      this._batchedNegotiation = false\n      if (this.initiator || !this._firstNegotiation) {\n        this._debug('starting batched negotiation')\n        this.negotiate()\n      } else {\n        this._debug('non-initiator initial negotiation request discarded')\n      }\n      this._firstNegotiation = false\n    })\n  }\n\n  negotiate () {\n    if (this.destroying) return\n    if (this.destroyed) throw errCode(new Error('cannot negotiate after peer is destroyed'), 'ERR_DESTROYED')\n\n    if (this.initiator) {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('start negotiation')\n        setTimeout(() => { // HACK: Chrome crashes if we immediately call createOffer\n          this._createOffer()\n        }, 0)\n      }\n    } else {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('requesting negotiation from initiator')\n        this.emit('signal', { // request initiator to renegotiate\n          type: 'renegotiate',\n          renegotiate: true\n        })\n      }\n    }\n    this._isNegotiating = true\n  }\n\n  // TODO: Delete this method once readable-stream is updated to contain a default\n  // implementation of destroy() that automatically calls _destroy()\n  // See: https://github.com/nodejs/readable-stream/issues/283\n  destroy (err) {\n    this._destroy(err, () => {})\n  }\n\n  _destroy (err, cb) {\n    if (this.destroyed || this.destroying) return\n    this.destroying = true\n\n    this._debug('destroying (error: %s)', err && (err.message || err))\n\n    queueMicrotask(() => { // allow events concurrent with the call to _destroy() to fire (see #692)\n      this.destroyed = true\n      this.destroying = false\n\n      this._debug('destroy (error: %s)', err && (err.message || err))\n\n      this.readable = this.writable = false\n\n      if (!this._readableState.ended) this.push(null)\n      if (!this._writableState.finished) this.end()\n\n      this._connected = false\n      this._pcReady = false\n      this._channelReady = false\n      this._remoteTracks = null\n      this._remoteStreams = null\n      this._senderMap = null\n\n      clearInterval(this._closingInterval)\n      this._closingInterval = null\n\n      clearInterval(this._interval)\n      this._interval = null\n      this._chunk = null\n      this._cb = null\n\n      if (this._onFinishBound) this.removeListener('finish', this._onFinishBound)\n      this._onFinishBound = null\n\n      if (this._channel) {\n        try {\n          this._channel.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._channel.onmessage = null\n        this._channel.onopen = null\n        this._channel.onclose = null\n        this._channel.onerror = null\n      }\n      if (this._pc) {\n        try {\n          this._pc.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._pc.oniceconnectionstatechange = null\n        this._pc.onicegatheringstatechange = null\n        this._pc.onsignalingstatechange = null\n        this._pc.onicecandidate = null\n        this._pc.ontrack = null\n        this._pc.ondatachannel = null\n      }\n      this._pc = null\n      this._channel = null\n\n      if (err) this.emit('error', err)\n      this.emit('close')\n      cb()\n    })\n  }\n\n  _setupData (event) {\n    if (!event.channel) {\n      // In some situations `pc.createDataChannel()` returns `undefined` (in wrtc),\n      // which is invalid behavior. Handle it gracefully.\n      // See: https://github.com/feross/simple-peer/issues/163\n      return this.destroy(errCode(new Error('Data channel event is missing `channel` property'), 'ERR_DATA_CHANNEL'))\n    }\n\n    this._channel = event.channel\n    this._channel.binaryType = 'arraybuffer'\n\n    if (typeof this._channel.bufferedAmountLowThreshold === 'number') {\n      this._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT\n    }\n\n    this.channelName = this._channel.label\n\n    this._channel.onmessage = event => {\n      this._onChannelMessage(event)\n    }\n    this._channel.onbufferedamountlow = () => {\n      this._onChannelBufferedAmountLow()\n    }\n    this._channel.onopen = () => {\n      this._onChannelOpen()\n    }\n    this._channel.onclose = () => {\n      this._onChannelClose()\n    }\n    this._channel.onerror = event => {\n      const err = event.error instanceof Error\n        ? event.error\n        : new Error(`Datachannel error: ${event.message} ${event.filename}:${event.lineno}:${event.colno}`)\n      this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n    }\n\n    // HACK: Chrome will sometimes get stuck in readyState \"closing\", let's check for this condition\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n    let isClosing = false\n    this._closingInterval = setInterval(() => { // No \"onclosing\" event\n      if (this._channel && this._channel.readyState === 'closing') {\n        if (isClosing) this._onChannelClose() // closing timed out: equivalent to onclose firing\n        isClosing = true\n      } else {\n        isClosing = false\n      }\n    }, CHANNEL_CLOSING_TIMEOUT)\n  }\n\n  _read () {}\n\n  _write (chunk, encoding, cb) {\n    if (this.destroyed) return cb(errCode(new Error('cannot write after peer is destroyed'), 'ERR_DATA_CHANNEL'))\n\n    if (this._connected) {\n      try {\n        this.send(chunk)\n      } catch (err) {\n        return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n      }\n      if (this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n        this._debug('start backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n        this._cb = cb\n      } else {\n        cb(null)\n      }\n    } else {\n      this._debug('write before connect')\n      this._chunk = chunk\n      this._cb = cb\n    }\n  }\n\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _onFinish () {\n    if (this.destroyed) return\n\n    // Wait a bit before destroying so the socket flushes.\n    // TODO: is there a more reliable way to accomplish this?\n    const destroySoon = () => {\n      setTimeout(() => this.destroy(), 1000)\n    }\n\n    if (this._connected) {\n      destroySoon()\n    } else {\n      this.once('connect', destroySoon)\n    }\n  }\n\n  _startIceCompleteTimeout () {\n    if (this.destroyed) return\n    if (this._iceCompleteTimer) return\n    this._debug('started iceComplete timeout')\n    this._iceCompleteTimer = setTimeout(() => {\n      if (!this._iceComplete) {\n        this._iceComplete = true\n        this._debug('iceComplete timeout completed')\n        this.emit('iceTimeout')\n        this.emit('_iceComplete')\n      }\n    }, this.iceCompleteTimeout)\n  }\n\n  _createOffer () {\n    if (this.destroyed) return\n\n    this._pc.createOffer(this.offerOptions)\n      .then(offer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) offer.sdp = filterTrickle(offer.sdp)\n        offer.sdp = this.sdpTransform(offer.sdp)\n\n        const sendOffer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || offer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n        }\n\n        const onSuccess = () => {\n          this._debug('createOffer success')\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendOffer()\n          else this.once('_iceComplete', sendOffer) // wait for candidates\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(offer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_OFFER'))\n      })\n  }\n\n  _requestMissingTransceivers () {\n    if (this._pc.getTransceivers) {\n      this._pc.getTransceivers().forEach(transceiver => {\n        if (!transceiver.mid && transceiver.sender.track && !transceiver.requested) {\n          transceiver.requested = true // HACK: Safari returns negotiated transceivers with a null mid\n          this.addTransceiver(transceiver.sender.track.kind)\n        }\n      })\n    }\n  }\n\n  _createAnswer () {\n    if (this.destroyed) return\n\n    this._pc.createAnswer(this.answerOptions)\n      .then(answer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) answer.sdp = filterTrickle(answer.sdp)\n        answer.sdp = this.sdpTransform(answer.sdp)\n\n        const sendAnswer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || answer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n          if (!this.initiator) this._requestMissingTransceivers()\n        }\n\n        const onSuccess = () => {\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendAnswer()\n          else this.once('_iceComplete', sendAnswer)\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(answer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_ANSWER'))\n      })\n  }\n\n  _onConnectionStateChange () {\n    if (this.destroyed) return\n    if (this._pc.connectionState === 'failed') {\n      this.destroy(errCode(new Error('Connection failed.'), 'ERR_CONNECTION_FAILURE'))\n    }\n  }\n\n  _onIceStateChange () {\n    if (this.destroyed) return\n    const iceConnectionState = this._pc.iceConnectionState\n    const iceGatheringState = this._pc.iceGatheringState\n\n    this._debug(\n      'iceStateChange (connection: %s) (gathering: %s)',\n      iceConnectionState,\n      iceGatheringState\n    )\n    this.emit('iceStateChange', iceConnectionState, iceGatheringState)\n\n    if (iceConnectionState === 'connected' || iceConnectionState === 'completed') {\n      this._pcReady = true\n      this._maybeReady()\n    }\n    if (iceConnectionState === 'failed') {\n      this.destroy(errCode(new Error('Ice connection failed.'), 'ERR_ICE_CONNECTION_FAILURE'))\n    }\n    if (iceConnectionState === 'closed') {\n      this.destroy(errCode(new Error('Ice connection closed.'), 'ERR_ICE_CONNECTION_CLOSED'))\n    }\n  }\n\n  getStats (cb) {\n    // statreports can come with a value array instead of properties\n    const flattenValues = report => {\n      if (Object.prototype.toString.call(report.values) === '[object Array]') {\n        report.values.forEach(value => {\n          Object.assign(report, value)\n        })\n      }\n      return report\n    }\n\n    // Promise-based getStats() (standard)\n    if (this._pc.getStats.length === 0 || this._isReactNativeWebrtc) {\n      this._pc.getStats()\n        .then(res => {\n          const reports = []\n          res.forEach(report => {\n            reports.push(flattenValues(report))\n          })\n          cb(null, reports)\n        }, err => cb(err))\n\n    // Single-parameter callback-based getStats() (non-standard)\n    } else if (this._pc.getStats.length > 0) {\n      this._pc.getStats(res => {\n        // If we destroy connection in `connect` callback this code might happen to run when actual connection is already closed\n        if (this.destroyed) return\n\n        const reports = []\n        res.result().forEach(result => {\n          const report = {}\n          result.names().forEach(name => {\n            report[name] = result.stat(name)\n          })\n          report.id = result.id\n          report.type = result.type\n          report.timestamp = result.timestamp\n          reports.push(flattenValues(report))\n        })\n        cb(null, reports)\n      }, err => cb(err))\n\n    // Unknown browser, skip getStats() since it's anyone's guess which style of\n    // getStats() they implement.\n    } else {\n      cb(null, [])\n    }\n  }\n\n  _maybeReady () {\n    this._debug('maybeReady pc %s channel %s', this._pcReady, this._channelReady)\n    if (this._connected || this._connecting || !this._pcReady || !this._channelReady) return\n\n    this._connecting = true\n\n    // HACK: We can't rely on order here, for details see https://github.com/js-platform/node-webrtc/issues/339\n    const findCandidatePair = () => {\n      if (this.destroyed) return\n\n      this.getStats((err, items) => {\n        if (this.destroyed) return\n\n        // Treat getStats error as non-fatal. It's not essential.\n        if (err) items = []\n\n        const remoteCandidates = {}\n        const localCandidates = {}\n        const candidatePairs = {}\n        let foundSelectedCandidatePair = false\n\n        items.forEach(item => {\n          // TODO: Once all browsers support the hyphenated stats report types, remove\n          // the non-hypenated ones\n          if (item.type === 'remotecandidate' || item.type === 'remote-candidate') {\n            remoteCandidates[item.id] = item\n          }\n          if (item.type === 'localcandidate' || item.type === 'local-candidate') {\n            localCandidates[item.id] = item\n          }\n          if (item.type === 'candidatepair' || item.type === 'candidate-pair') {\n            candidatePairs[item.id] = item\n          }\n        })\n\n        const setSelectedCandidatePair = selectedCandidatePair => {\n          foundSelectedCandidatePair = true\n\n          let local = localCandidates[selectedCandidatePair.localCandidateId]\n\n          if (local && (local.ip || local.address)) {\n            // Spec\n            this.localAddress = local.ip || local.address\n            this.localPort = Number(local.port)\n          } else if (local && local.ipAddress) {\n            // Firefox\n            this.localAddress = local.ipAddress\n            this.localPort = Number(local.portNumber)\n          } else if (typeof selectedCandidatePair.googLocalAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            local = selectedCandidatePair.googLocalAddress.split(':')\n            this.localAddress = local[0]\n            this.localPort = Number(local[1])\n          }\n          if (this.localAddress) {\n            this.localFamily = this.localAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          let remote = remoteCandidates[selectedCandidatePair.remoteCandidateId]\n\n          if (remote && (remote.ip || remote.address)) {\n            // Spec\n            this.remoteAddress = remote.ip || remote.address\n            this.remotePort = Number(remote.port)\n          } else if (remote && remote.ipAddress) {\n            // Firefox\n            this.remoteAddress = remote.ipAddress\n            this.remotePort = Number(remote.portNumber)\n          } else if (typeof selectedCandidatePair.googRemoteAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            remote = selectedCandidatePair.googRemoteAddress.split(':')\n            this.remoteAddress = remote[0]\n            this.remotePort = Number(remote[1])\n          }\n          if (this.remoteAddress) {\n            this.remoteFamily = this.remoteAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          this._debug(\n            'connect local: %s:%s remote: %s:%s',\n            this.localAddress,\n            this.localPort,\n            this.remoteAddress,\n            this.remotePort\n          )\n        }\n\n        items.forEach(item => {\n          // Spec-compliant\n          if (item.type === 'transport' && item.selectedCandidatePairId) {\n            setSelectedCandidatePair(candidatePairs[item.selectedCandidatePairId])\n          }\n\n          // Old implementations\n          if (\n            (item.type === 'googCandidatePair' && item.googActiveConnection === 'true') ||\n            ((item.type === 'candidatepair' || item.type === 'candidate-pair') && item.selected)\n          ) {\n            setSelectedCandidatePair(item)\n          }\n        })\n\n        // Ignore candidate pair selection in browsers like Safari 11 that do not have any local or remote candidates\n        // But wait until at least 1 candidate pair is available\n        if (!foundSelectedCandidatePair && (!Object.keys(candidatePairs).length || Object.keys(localCandidates).length)) {\n          setTimeout(findCandidatePair, 100)\n          return\n        } else {\n          this._connecting = false\n          this._connected = true\n        }\n\n        if (this._chunk) {\n          try {\n            this.send(this._chunk)\n          } catch (err) {\n            return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n          }\n          this._chunk = null\n          this._debug('sent chunk from \"write before connect\"')\n\n          const cb = this._cb\n          this._cb = null\n          cb(null)\n        }\n\n        // If `bufferedAmountLowThreshold` and 'onbufferedamountlow' are unsupported,\n        // fallback to using setInterval to implement backpressure.\n        if (typeof this._channel.bufferedAmountLowThreshold !== 'number') {\n          this._interval = setInterval(() => this._onInterval(), 150)\n          if (this._interval.unref) this._interval.unref()\n        }\n\n        this._debug('connect')\n        this.emit('connect')\n      })\n    }\n    findCandidatePair()\n  }\n\n  _onInterval () {\n    if (!this._cb || !this._channel || this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n      return\n    }\n    this._onChannelBufferedAmountLow()\n  }\n\n  _onSignalingStateChange () {\n    if (this.destroyed) return\n\n    if (this._pc.signalingState === 'stable') {\n      this._isNegotiating = false\n\n      // HACK: Firefox doesn't yet support removing tracks when signalingState !== 'stable'\n      this._debug('flushing sender queue', this._sendersAwaitingStable)\n      this._sendersAwaitingStable.forEach(sender => {\n        this._pc.removeTrack(sender)\n        this._queuedNegotiation = true\n      })\n      this._sendersAwaitingStable = []\n\n      if (this._queuedNegotiation) {\n        this._debug('flushing negotiation queue')\n        this._queuedNegotiation = false\n        this._needsNegotiation() // negotiate again\n      } else {\n        this._debug('negotiated')\n        this.emit('negotiated')\n      }\n    }\n\n    this._debug('signalingStateChange %s', this._pc.signalingState)\n    this.emit('signalingStateChange', this._pc.signalingState)\n  }\n\n  _onIceCandidate (event) {\n    if (this.destroyed) return\n    if (event.candidate && this.trickle) {\n      this.emit('signal', {\n        type: 'candidate',\n        candidate: {\n          candidate: event.candidate.candidate,\n          sdpMLineIndex: event.candidate.sdpMLineIndex,\n          sdpMid: event.candidate.sdpMid\n        }\n      })\n    } else if (!event.candidate && !this._iceComplete) {\n      this._iceComplete = true\n      this.emit('_iceComplete')\n    }\n    // as soon as we've received one valid candidate start timeout\n    if (event.candidate) {\n      this._startIceCompleteTimeout()\n    }\n  }\n\n  _onChannelMessage (event) {\n    if (this.destroyed) return\n    let data = event.data\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    this.push(data)\n  }\n\n  _onChannelBufferedAmountLow () {\n    if (this.destroyed || !this._cb) return\n    this._debug('ending backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n    const cb = this._cb\n    this._cb = null\n    cb(null)\n  }\n\n  _onChannelOpen () {\n    if (this._connected || this.destroyed) return\n    this._debug('on channel open')\n    this._channelReady = true\n    this._maybeReady()\n  }\n\n  _onChannelClose () {\n    if (this.destroyed) return\n    this._debug('on channel close')\n    this.destroy()\n  }\n\n  _onTrack (event) {\n    if (this.destroyed) return\n\n    event.streams.forEach(eventStream => {\n      this._debug('on track')\n      this.emit('track', event.track, eventStream)\n\n      this._remoteTracks.push({\n        track: event.track,\n        stream: eventStream\n      })\n\n      if (this._remoteStreams.some(remoteStream => {\n        return remoteStream.id === eventStream.id\n      })) return // Only fire one 'stream' event, even though there may be multiple tracks per stream\n\n      this._remoteStreams.push(eventStream)\n      queueMicrotask(() => {\n        this._debug('on stream')\n        this.emit('stream', eventStream) // ensure all tracks have been added\n      })\n    })\n  }\n\n  _debug () {\n    const args = [].slice.call(arguments)\n    args[0] = '[' + this._id + '] ' + args[0]\n    debug.apply(null, args)\n  }\n}\n\nPeer.WEBRTC_SUPPORT = !!getBrowserRTC()\n\n/**\n * Expose peer and data channel config for overriding all Peer\n * instances. Otherwise, just set opts.config or opts.channelConfig\n * when constructing a Peer.\n */\nPeer.config = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:global.stun.twilio.com:3478'\n      ]\n    }\n  ],\n  sdpSemantics: 'unified-plan'\n}\n\nPeer.channelConfig = {}\n\nmodule.exports = Peer\n","import SimplePeer, { Instance as PeerInstance, SignalData } from 'simple-peer';\n\nexport interface GameMessage {\n  type: string; // e.g., 'gameState', 'playerAction', 'dealCards', 'chat'\n  payload: any; // Content of the message\n  senderId?: string; // Optional: to identify who sent it if multiple peers later\n}\n\nexport class Network {\n  peer?: PeerInstance;\n  private onDataReceivedCallback: (message: GameMessage) => void;\n  private onConnectCallback?: () => void;\n  private onSignalCallback: (signal: SignalData) => void;\n  private onCloseCallback?: () => void;\n  private onErrorCallback?: (error: Error) => void;\n\n  constructor(\n    onDataReceived: (message: GameMessage) => void,\n    onSignal: (signal: SignalData) => void,\n    onConnect?: () => void,\n    onClose?: () => void,\n    onError?: (error: Error) => void,\n  ) {\n    this.onDataReceivedCallback = onDataReceived;\n    this.onSignalCallback = onSignal;\n    this.onConnectCallback = onConnect;\n    this.onCloseCallback = onClose;\n    this.onErrorCallback = onError;\n    console.log(\"Network class instantiated.\");\n  }\n\n  private setupPeerHandlers(p: PeerInstance): void {\n    p.on('signal', (data) => {\n      console.log('SIGNAL data generated by peer:', data);\n      this.onSignalCallback(data); // Pass signal to UI/main to display\n    });\n\n    p.on('connect', () => {\n      console.log('PEER CONNECTED');\n      if (this.onConnectCallback) {\n        this.onConnectCallback();\n      }\n      // Could send a default \"hello\" message\n      // this.send({ type: 'info', payload: 'Connection established!' });\n    });\n\n    p.on('data', (data) => {\n      console.log('DATA received from peer:', data.toString());\n      try {\n        const message = JSON.parse(data.toString()) as GameMessage;\n        this.onDataReceivedCallback(message);\n      } catch (error) {\n        console.error('Error parsing received data:', error);\n        if (this.onErrorCallback) {\n            this.onErrorCallback(new Error(\"Error parsing received data\"));\n        }\n      }\n    });\n\n    p.on('error', (err) => {\n      console.error('PEER ERROR:', err);\n      if (this.onErrorCallback) {\n        this.onErrorCallback(err instanceof Error ? err : new Error(String(err)) );\n      }\n    });\n\n    p.on('close', () => {\n      console.log('PEER CONNECTION CLOSED');\n      if (this.onCloseCallback) {\n        this.onCloseCallback();\n      }\n      this.peer = undefined; // Clear the peer instance on close\n    });\n  }\n\n  public initiateConnection(): void {\n    if (this.peer) {\n      console.warn(\"Peer already exists. Destroying old one.\");\n      this.peer.destroy();\n    }\n    console.log(\"Initiating peer connection...\");\n    this.peer = new SimplePeer({\n      initiator: true,\n      trickle: false, // Simplifies manual signaling by sending one big signal blob\n    });\n    this.setupPeerHandlers(this.peer);\n  }\n\n  public connectToPeerSignal(signalData: SignalData | string): void {\n    if (this.peer && this.peer.initiator) {\n        // This is the initiator receiving an answer signal\n        console.log(\"Initiator received answer signal. Applying signal...\");\n        try {\n            const parsedSignal = typeof signalData === 'string' ? JSON.parse(signalData) : signalData;\n            this.peer.signal(parsedSignal);\n        } catch (e) {\n            console.error(\"Error parsing or applying signal data:\", e);\n             if (this.onErrorCallback) {\n                this.onErrorCallback(e instanceof Error ? e : new Error(\"Failed to parse signal data\"));\n            }\n        }\n        return;\n    }\n\n    // This is the joiner creating a peer and applying the offer signal\n    if (this.peer) {\n      console.warn(\"Peer already exists (as joiner). Destroying old one.\");\n      this.peer.destroy();\n    }\n    console.log(\"Joining peer with received offer signal...\");\n    this.peer = new SimplePeer({\n      initiator: false,\n      trickle: false,\n    });\n    this.setupPeerHandlers(this.peer);\n    try {\n        const parsedSignal = typeof signalData === 'string' ? JSON.parse(signalData) : signalData;\n        this.peer.signal(parsedSignal); // Apply the offer signal from the initiator\n    } catch (e) {\n        console.error(\"Error parsing or applying signal data:\", e);\n        if (this.onErrorCallback) {\n            this.onErrorCallback(e instanceof Error ? e : new Error(\"Failed to parse signal data\"));\n        }\n    }\n  }\n  \n  public get isConnected(): boolean {\n    return this.peer ? this.peer.connected : false;\n  }\n\n  public send(message: GameMessage): boolean {\n    if (this.peer && this.peer.connected) {\n      try {\n        const messageString = JSON.stringify(message);\n        this.peer.send(messageString);\n        console.log('Sent message:', message);\n        return true;\n      } catch (error) {\n        console.error('Error sending message:', error);\n        if (this.onErrorCallback) {\n            this.onErrorCallback(new Error(\"Error stringifying or sending message\"));\n        }\n        return false;\n      }\n    } else {\n      console.warn('Cannot send message, peer not connected.');\n      return false;\n    }\n  }\n\n  public disconnect(): void {\n    if (this.peer) {\n      console.log(\"Disconnecting peer...\");\n      this.peer.destroy();\n      this.peer = undefined;\n    }\n  }\n}\n","import { GameState, BettingRound } from './GameState';\nimport { Player } from './Player';\n\nexport class UIManager {\n    private foldButton: HTMLButtonElement;\n    private checkButton: HTMLButtonElement;\n    private callButton: HTMLButtonElement;\n    private betButton: HTMLButtonElement;\n    private raiseButton: HTMLButtonElement;\n    private betAmountInput: HTMLInputElement;\n    private playerTurnIndicator: HTMLParagraphElement;\n    private networkControlsDiv: HTMLElement;\n    private actionControlsDiv: HTMLElement;\n\n\n    constructor() {\n        this.foldButton = document.getElementById('foldButton') as HTMLButtonElement;\n        this.checkButton = document.getElementById('checkButton') as HTMLButtonElement;\n        this.callButton = document.getElementById('callButton') as HTMLButtonElement;\n        this.betButton = document.getElementById('betButton') as HTMLButtonElement;\n        this.raiseButton = document.getElementById('raiseButton') as HTMLButtonElement;\n        this.betAmountInput = document.getElementById('betAmountInput') as HTMLInputElement;\n        this.playerTurnIndicator = document.getElementById('playerTurnIndicator') as HTMLParagraphElement;\n        this.networkControlsDiv = document.getElementById('network-controls') as HTMLElement;\n        this.actionControlsDiv = document.getElementById('action-controls') as HTMLElement;\n\n\n        if (!this.foldButton || !this.checkButton || !this.callButton || !this.betButton || !this.raiseButton || !this.betAmountInput || !this.playerTurnIndicator || !this.networkControlsDiv || !this.actionControlsDiv) {\n            throw new Error(\"One or more UI elements for game actions not found in the DOM.\");\n        }\n        \n        this.hideActionControls(); // Hidden by default until game starts and it's player's turn\n    }\n\n    public toggleNetworkControls(show: boolean): void {\n        if (this.networkControlsDiv) {\n            this.networkControlsDiv.style.display = show ? 'block' : 'none';\n        }\n    }\n    \n    public showActionControls(): void {\n        this.actionControlsDiv.classList.remove('hidden');\n         this.actionControlsDiv.style.display = 'flex'; // Or whatever its default display is\n    }\n\n    public hideActionControls(): void {\n        //this.actionControlsDiv.classList.add('hidden');\n        this.actionControlsDiv.style.display = 'none';\n    }\n\n\n    public updateActionButtons(gameState: GameState, localPlayerId: string | null): void {\n        if (!localPlayerId || gameState.bettingRound === BettingRound.GameOver || gameState.bettingRound === BettingRound.Showdown) {\n            this.disableAllActions(\"Game over or not playing.\");\n            this.hideActionControls(); // Hide controls if game is over or player not part of it\n            return;\n        }\n        \n        this.showActionControls(); // Make sure they are visible if it's an active game\n\n        const currentPlayer = gameState.activePlayers[gameState.currentPlayerIndex];\n        const isLocalPlayerTurn = currentPlayer && currentPlayer.id === localPlayerId && !currentPlayer.folded && !currentPlayer.isAllIn;\n\n        if (!isLocalPlayerTurn) {\n            this.disableAllActions(currentPlayer ? `${currentPlayer.name}'s turn` : \"Waiting for player...\");\n            return;\n        }\n\n        this.playerTurnIndicator.textContent = \"Your Turn\";\n        \n        // Enable all buttons by default, then disable based on rules\n        this.foldButton.disabled = false;\n        this.checkButton.disabled = false;\n        this.callButton.disabled = false;\n        this.betButton.disabled = false;\n        this.raiseButton.disabled = false;\n        this.betAmountInput.disabled = false;\n\n        const currentBetForPlayer = currentPlayer.currentBet; // How much player has bet this round\n        const gameCurrentRoundBet = gameState.currentRoundBet; // Highest bet on table this round\n\n        // Fold is always possible if it's your turn\n        this.foldButton.disabled = false;\n\n        // Check: Possible if currentRoundBet is 0 OR player's currentBet matches currentRoundBet\n        if (gameCurrentRoundBet > 0 && currentBetForPlayer < gameCurrentRoundBet) {\n            this.checkButton.disabled = true; // Must call or raise\n        } else {\n            this.checkButton.disabled = false; // Can check\n        }\n        \n        // Call: Possible if there's a bet to call (gameCurrentRoundBet > currentBetForPlayer)\n        // And player has enough chips (implicit, button click will handle if not enough)\n        if (gameCurrentRoundBet > 0 && currentBetForPlayer < gameCurrentRoundBet) {\n            this.callButton.disabled = false;\n            this.callButton.textContent = `Call ${gameCurrentRoundBet - currentBetForPlayer}`;\n        } else {\n            this.callButton.disabled = true;\n            this.callButton.textContent = \"Call\";\n        }\n\n        // Bet: Possible if no bet has been made yet in this round (gameCurrentRoundBet === 0)\n        if (gameCurrentRoundBet === 0) {\n            this.betButton.disabled = false;\n            this.raiseButton.disabled = true; // Cannot raise if no bet yet\n            this.callButton.disabled = true; // Cannot call if no bet yet (check is the option)\n        } else {\n            // There is an existing bet\n            this.betButton.disabled = true; // Must call or raise\n            this.raiseButton.disabled = false; // Can raise\n        }\n        \n        // Ensure player has chips to make any bet/raise/call\n        if (currentPlayer.chips === 0) { // All-in\n            this.disableAllActions(\"You are All-In.\");\n            this.foldButton.disabled = true; // Cannot fold if all-in and no further action possible\n        }\n        \n        // Input field validation (basic) - min bet/raise is usually big blind or last bet/raise amount\n        this.betAmountInput.min = gameState.minRaise.toString();\n        // Placeholder could be the min raise amount\n        this.betAmountInput.placeholder = `Min ${gameState.minRaise}`;\n\n\n    }\n\n    private disableAllActions(reason: string): void {\n        this.foldButton.disabled = true;\n        this.checkButton.disabled = true;\n        this.callButton.disabled = true;\n        this.betButton.disabled = true;\n        this.raiseButton.disabled = true;\n        this.betAmountInput.disabled = true;\n        this.playerTurnIndicator.textContent = reason;\n    }\n\n    public getBetAmount(): number {\n        const amount = parseInt(this.betAmountInput.value, 10);\n        if (isNaN(amount) || amount <= 0) {\n            alert(\"Please enter a valid bet amount.\");\n            return 0;\n        }\n        return amount;\n    }\n    \n    public clearBetAmount(): void {\n        this.betAmountInput.value = \"\";\n    }\n}\n","import { GameState, BettingRound } from './GameState';\nimport { SVGGraphics } from './SVGGraphics';\nimport { Network, GameMessage } from './Network';\nimport { UIManager } from './UI'; // Import UIManager\nimport { SignalData } from 'simple-peer';\n// Player and Card might not be directly needed if GameState handles all interactions\n// import { Player } from './Player';\n// import { Card } from './Card'; \n\nconsole.log(\"Poker Game - UI Interaction Test\");\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    let graphics: SVGGraphics;\n    let network: Network;\n    let gameState: GameState | undefined; // Can be undefined until game starts\n    let uiManager: UIManager;\n    let localPlayerId: string | null = null; // Determined after connection\n    let isInitiatorFlag: boolean = false;\n\n    // UI Elements for Networking (now mostly managed by UIManager)\n    const initiateGameButton = document.getElementById('initiateGame') as HTMLButtonElement;\n    const outgoingSignalTextarea = document.getElementById('outgoingSignal') as HTMLTextAreaElement;\n    const incomingSignalTextarea = document.getElementById('incomingSignal') as HTMLTextAreaElement;\n    const connectToSignalButton = document.getElementById('connectToSignal') as HTMLButtonElement;\n    const connectionStatusP = document.getElementById('connectionStatus') as HTMLParagraphElement;\n\n    // Action Control Elements (references needed for event listeners)\n    const foldButton = document.getElementById('foldButton') as HTMLButtonElement;\n    const checkButton = document.getElementById('checkButton') as HTMLButtonElement;\n    const callButton = document.getElementById('callButton') as HTMLButtonElement;\n    const betButton = document.getElementById('betButton') as HTMLButtonElement;\n    const raiseButton = document.getElementById('raiseButton') as HTMLButtonElement;\n    const betAmountInput = document.getElementById('betAmountInput') as HTMLInputElement;\n\n\n    try {\n        graphics = new SVGGraphics(\"game-container\");\n        uiManager = new UIManager(); // Initialize UI Manager\n    } catch (e: any) {\n        console.error(\"Failed to initialize Graphics or UI:\", e);\n        alert(`Error initializing: ${e.message}. Check console.`);\n        return;\n    }\n\n    // --- Network Callbacks ---\n    function handleSignal(signal: SignalData) {\n        outgoingSignalTextarea.value = JSON.stringify(signal);\n        connectionStatusP.textContent = \"Signal generated. Share with peer.\";\n    }\n\n    function handleConnect() {\n        localPlayerId = isInitiatorFlag ? \"p0\" : \"p1\"; // Initiator is p0, joiner is p1\n        connectionStatusP.textContent = `Connected! You are ${localPlayerId} ${isInitiatorFlag ? \"(Initiator)\" : \"(Joined)\"}`;\n        console.log(`Network connected. Local player ID: ${localPlayerId}`);\n        \n        uiManager.toggleNetworkControls(false); // Hide network controls\n        uiManager.showActionControls(); // Show game action controls\n\n        if (isInitiatorFlag) {\n            const playerNames = [\"Player 0\", \"Player 1\"]; // More generic names\n            gameState = new GameState(playerNames, 1000, 5, 10);\n            gameState.setupNewHand();\n            gameState.dealHands();\n            \n            network.send({ type: 'gameStateFull', payload: gameState.toJSON() });\n            redrawTableAndUI();\n        }\n        // Joiner waits for gameStateFull from initiator\n    }\n    \n    function handleDataReceived(message: GameMessage) {\n        console.log(\"Data received:\", message);\n        if (!gameState && message.type !== 'gameStateFull') {\n            console.warn(\"GameState not initialized, ignoring message type:\", message.type);\n            // Could request a full state sync here if needed\n            return;\n        }\n\n        switch (message.type) {\n            case 'gameStateFull': // Sent by initiator on connect, or for resync\n                if (!localPlayerId) {\n                    console.error(\"Received gameStateFull but localPlayerId is not set.\");\n                    localPlayerId = isInitiatorFlag ? \"p0\" : \"p1\"; // Attempt to set it\n                }\n                gameState = GameState.fromJSON(message.payload, localPlayerId!);\n                console.log(\"Full GameState updated from peer.\");\n                break;\n            case 'gameStateUpdate': // Partial update (less used now with full sync, but could be for efficiency)\n                 if (gameState && localPlayerId) {\n                    gameState.updateFromJSON(message.payload, localPlayerId);\n                    console.log(\"GameState partially updated from peer.\");\n                 }\n                break;\n            case 'playerAction':\n                if (gameState && localPlayerId) {\n                    const { playerId, action, amount } = message.payload;\n                    if (playerId !== localPlayerId) { // Action from peer\n                        console.log(`Applying action from peer: ${playerId} ${action} ${amount || ''}`);\n                        // The GameState's handlePlayerAction should manage whose turn it is\n                        // and if the action is valid.\n                        gameState.handlePlayerAction(playerId, action, amount); \n                        // handlePlayerAction internally calls advanceToNextPlayerOrRound\n                    } else {\n                        console.log(\"Received own action echo, ignoring.\");\n                    }\n                }\n                break;\n            default:\n                console.warn(\"Unknown message type received:\", message.type);\n        }\n        redrawTableAndUI();\n    }\n\n    function handleClose() {\n        connectionStatusP.textContent = \"Disconnected.\";\n        localPlayerId = null;\n        isInitiatorFlag = false;\n        uiManager.toggleNetworkControls(true); // Show network controls again\n        uiManager.hideActionControls();\n        gameState = undefined; // Clear game state\n        redrawTableAndUI(); // Clear table\n        if (network) network.disconnect();\n    }\n    \n    function handleError(err: Error) {\n        console.error(\"Network Error:\", err);\n        connectionStatusP.textContent = `Error: ${err.message}`;\n    }\n\n    network = new Network(handleDataReceived, handleSignal, handleConnect, handleClose, handleError);\n\n    // --- Button Event Listeners for Network Setup ---\n    initiateGameButton.addEventListener('click', () => {\n        isInitiatorFlag = true;\n        outgoingSignalTextarea.value = \"\"; \n        incomingSignalTextarea.value = \"\";\n        network.initiateConnection();\n        connectionStatusP.textContent = \"Initiating...\";\n    });\n\n    connectToSignalButton.addEventListener('click', () => {\n        const signalValue = incomingSignalTextarea.value;\n        if (!signalValue) {\n            alert(\"Please paste the peer's signal first.\");\n            return;\n        }\n        try {\n            const parsedSignal = JSON.parse(signalValue);\n            if (network.peer && network.peer.initiator) { \n                 network.connectToPeerSignal(parsedSignal); \n            } else { \n                isInitiatorFlag = false; // Joining an existing offer\n                network.connectToPeerSignal(parsedSignal); \n            }\n            connectionStatusP.textContent = \"Signal pasted. Connecting...\";\n        } catch (e) {\n            console.error(\"Invalid signal format:\", e);\n            alert(\"Invalid signal format.\");\n            connectionStatusP.textContent = \"Error: Invalid signal format.\";\n        }\n    });\n\n    // --- Game Action Button Event Listeners ---\n    function performPlayerAction(action: 'fold' | 'check' | 'call' | 'bet' | 'raise', getAmountFn?: () => number) {\n        if (!gameState || !localPlayerId) {\n            console.error(\"Cannot perform action: game state or local player ID not set.\");\n            return;\n        }\n        const currentPlayerInGame = gameState.activePlayers[gameState.currentPlayerIndex];\n        if (!currentPlayerInGame || currentPlayerInGame.id !== localPlayerId) {\n            alert(\"Not your turn!\");\n            console.warn(`Action attempt by ${localPlayerId} but current player is ${currentPlayerInGame?.id}`);\n            return;\n        }\n\n        let amount: number | undefined = undefined;\n        if (action === 'bet' || action === 'raise') {\n            if (!getAmountFn) { console.error(\"Amount function not provided for bet/raise\"); return; }\n            amount = getAmountFn();\n            if (amount === 0 && action === 'bet') { /* UI Manager getBetAmount shows alert */ return; }\n            if (amount === 0 && action === 'raise') { /* UI Manager getBetAmount shows alert */ return; }\n             // Basic validation for raise amount (must be > 0)\n            if (action === 'raise' && amount <= 0) {\n                alert(\"Raise amount must be greater than 0.\");\n                return;\n            }\n        }\n        \n        // Optimistically apply action locally (will be confirmed by state update if needed)\n        // or let GameState handle it and rely on network message for remote echo if strict sync\n        const actionSuccess = gameState.handlePlayerAction(localPlayerId, action, amount);\n\n        if (actionSuccess) {\n            // Send action to peer\n            network.send({\n                type: 'playerAction',\n                payload: { playerId: localPlayerId, action, amount }\n            });\n            redrawTableAndUI(); // Update local UI immediately\n            uiManager.clearBetAmount();\n        } else {\n            alert(\"Invalid action or amount. Check console.\");\n        }\n    }\n\n    foldButton.addEventListener('click', () => performPlayerAction('fold'));\n    checkButton.addEventListener('click', () => performPlayerAction('check'));\n    callButton.addEventListener('click', () => performPlayerAction('call'));\n    betButton.addEventListener('click', () => performPlayerAction('bet', () => uiManager.getBetAmount()));\n    raiseButton.addEventListener('click', () => performPlayerAction('raise', () => uiManager.getBetAmount()));\n    \n\n    // --- Helper to Redraw Table and Update UI ---\n    function redrawTableAndUI() {\n        if (graphics && gameState && localPlayerId) {\n            graphics.drawTable(gameState.players, gameState.communityCards, gameState.pot);\n            uiManager.updateActionButtons(gameState, localPlayerId);\n        } else if (graphics) { // Game ended or not started\n            graphics.drawTable([], [], 0); // Draw empty table\n            if(uiManager && localPlayerId) uiManager.updateActionButtons(new GameState([],0), localPlayerId); // Show disabled buttons\n            else if (uiManager) uiManager.hideActionControls();\n        }\n    }\n    \n    // Initial state\n    uiManager.toggleNetworkControls(true);\n    uiManager.hideActionControls();\n    redrawTableAndUI(); // Draw empty table initially\n});\n\n// Ensure SVGGraphics has getSVGElement (already done in previous step, but for clarity)\n// In SVGGraphics.ts: public getSVGElement(): SVGSVGElement { return this.svg; }\n// GameState.prototype.toJSON and static fromJSON methods were moved to GameState.ts already.\n// Player.prototype.toJSON and static fromJSON methods were moved to Player.ts already.\n"],"names":["Suit","Rank","createCard","rank","suit","Deck","i","j","Player","id","name","initialChips","card","amount","betAmount","currentRoundBet","amountToCall","raiseAmount","currentRoundBetForAction","amountToPlace","json","player","c","HAND_RANKS","RANK_VALUES","HandEvaluator","hand","sortedHand","a","b","tieBreakerValues","BettingRound","BettingRound2","GameState","playerNames","sb","bb","index","sbPos","bbPos","sbPlayer","bbPlayer","utgPos","p","firstToActGlobalIndex","playerId","action","_a","_b","chipsCommitted","totalNewBet","nonFoldedPlayers","nextActorIndex","playerWhoWasLastToRaise","allOthersMatched","winner","contenders","bestHandResults","allCards","currentEval","tie","winners","r","splitAmount","res","localPlayerActualId","gs","pData","activePlayerFromSignal","localPlayer","SVG_NS","CARD_WIDTH","CARD_HEIGHT","CARD_RX","CARD_STROKE","CARD_FILL","SUIT_COLORS","SVGGraphics","containerId","container","defs","style","children","child","x","y","hidden","group","rect","textContent","textColor","text","players","communityCards","pot","svgWidth","svgHeight","numCommCards","communityTotalWidth","communityStartX","communityY","numPlayers","tableRadiusX","tableRadiusY","centerX","centerY","angle","playerBaseX","playerBaseY","playerInfo","betText","cardXOffset","cardIndex","shouldHide","foldedText","potText","s","m","h","d","w","ms","val","options","type","parse","fmtLong","fmtShort","str","match","n","msAbs","plural","isPlural","setup","env","createDebug","coerce","disable","enable","enabled","require$$0","destroy","key","selectColor","namespace","hash","prevTime","enableOverride","namespacesCache","enabledCache","debug","args","self","curr","format","formatter","extend","v","delimiter","newDebug","namespaces","split","ns","matchesTemplate","search","template","searchIndex","templateIndex","starIndex","matchIndex","skip","common","exports","formatArgs","save","load","useColors","localstorage","warned","module","lastC","define_process_env_default","formatters","error","getBrowserRtc","wrtc","base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","len","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","extraBytes","parts","maxChunkLength","len2","ieee754","buffer","offset","isLE","mLen","nBytes","e","eLen","eMax","eBias","nBits","value","rt","base64","require$$1","customInspectSymbol","Buffer","SlowBuffer","K_MAX_LENGTH","typedArraySupport","proto","createBuffer","length","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","fromObject","assertSize","size","alloc","fill","encoding","checked","string","actual","fromArrayLike","array","arrayView","copy","byteOffset","obj","numberIsNaN","list","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","max","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","bytes","newBuf","checkOffset","ext","noAssert","mul","defineBigIntMethod","validateNumber","first","last","boundsError","lo","hi","checkInt","min","maxBytes","wrtBigUInt64LE","checkIntBI","wrtBigUInt64BE","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","errors","E","sym","getMessage","Base","range","input","msg","received","addNumericalSeparator","checkBounds","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","src","dst","alphabet","table","i16","fn","BufferBigIntNotDefined","copyProps","SafeBuffer","MAX_BYTES","MAX_UINT32","oldBrowser","crypto","global","browserModule","randomBytes","cb","generated","__viteBrowserExternal","streamBrowser","ownKeys","object","enumerableOnly","keys","symbols","_objectSpread","source","_defineProperty","_toPropertyKey","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_toPrimitive","hint","prim","_require","_require2","inspect","custom","copyBuffer","buffer_list","BufferList","entry","hasStrings","nb","_","err","_this","readableDestroyed","writableDestroyed","emitErrorNT","emitCloseNT","emitErrorAndCloseNT","undestroy","errorOrDestroy","stream","rState","wState","destroy_1","_inheritsLoose","subClass","superClass","codes","createErrorType","message","arg1","arg2","arg3","NodeError","_Base","oneOf","expected","thing","startsWith","endsWith","this_len","includes","determiner","errorsBrowser","ERR_INVALID_OPT_VALUE","highWaterMarkFrom","isDuplex","duplexKey","getHighWaterMark","state","hwm","inherits_browserModule","ctor","superCtor","TempCtor","browser","deprecate","config","deprecated","_stream_writable","Writable","CorkedRequest","onCorkedFinish","Duplex","WritableState","internalUtil","Stream","require$$2","OurUint8Array","_uint8ArrayToBuffer","chunk","_isUint8Array","destroyImpl","require$$3","require$$4","_require$codes","require$$5","ERR_INVALID_ARG_TYPE","ERR_METHOD_NOT_IMPLEMENTED","ERR_MULTIPLE_CALLBACK","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_DESTROYED","ERR_STREAM_NULL_VALUES","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","require$$6","nop","require$$7","noDecode","er","onwrite","current","realHasInstance","writeAfterEnd","validChunk","isBuf","writeOrBuffer","clearBuffer","decodeChunk","newChunk","doWrite","writev","onwriteError","sync","finishMaybe","onwriteStateUpdate","finished","needFinish","afterWrite","onwriteDrain","l","holder","count","allBuffers","endWritable","callFinal","prefinish","need","corkReq","objectKeys","_stream_duplex","Readable","method","onend","onEndNT","isEncoding","_normalizeEncoding","enc","retried","normalizeEncoding","nenc","string_decoder","StringDecoder","utf16Text","utf16End","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","utf8End","utf8Text","utf8CheckByte","byte","utf8CheckIncomplete","utf8CheckExtraBytes","total","ERR_STREAM_PREMATURE_CLOSE","once","callback","called","_len","_key","noop","isRequest","eos","opts","readable","writable","onlegacyfinish","onfinish","writableEnded","readableEnded","onerror","onclose","onrequest","endOfStream","_Object$setPrototypeO","kLastResolve","kLastReject","kError","kEnded","kLastPromise","kHandlePromise","kStream","createIterResult","done","readAndResolve","iter","resolve","data","onReadable","wrapForNext","lastPromise","reject","AsyncIteratorPrototype","ReadableStreamAsyncIteratorPrototype","promise","_this2","createReadableStreamAsyncIterator","_Object$create","iterator","async_iterator","fromBrowser","_stream_readable","ReadableState","EElistenerCount","emitter","debugUtil","ERR_STREAM_PUSH_AFTER_EOF","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","require$$8","kProxyEvents","prependListener","event","require$$9","require$$10","skipChunkCheck","readableAddChunk","addToFront","onEofChunk","chunkInvalid","addChunk","maybeReadMore","emitReadable","decoder","content","MAX_HWM","computeNewHighWaterMark","howMuchToRead","nOrig","endReadable","doRead","fromList","emitReadable_","flow","maybeReadMore_","dest","pipeOpts","doEnd","endFn","unpipe","onunpipe","unpipeInfo","cleanup","ondrain","pipeOnDrain","cleanedUp","ondata","indexOf","dests","ev","nReadingNextTick","updateReadableListening","resume","resume_","paused","require$$11","endReadableNT","iterable","require$$12","xs","_stream_transform","Transform","ERR_TRANSFORM_ALREADY_TRANSFORMING","ERR_TRANSFORM_WITH_LENGTH_0","afterTransform","ts","rs","err2","_stream_passthrough","PassThrough","ERR_MISSING_ARGS","destroyer","reading","writing","closed","destroyed","call","pipe","to","popCallback","streams","pipeline","destroys","pipeline_1","queueMicrotask_1","assign","createError","ErrClass","errCode","getBrowserRTC","randombytes","queueMicrotask","MAX_BUFFERED_AMOUNT","ICECOMPLETE_TIMEOUT","CHANNEL_CLOSING_TIMEOUT","filterTrickle","sdp","warn","Peer","candidate","iceCandidateObj","kind","init","track","submap","sender","oldTrack","newTrack","isClosing","destroySoon","offer","sendOffer","signal","onSuccess","onError","transceiver","answer","sendAnswer","iceConnectionState","iceGatheringState","flattenValues","report","reports","result","findCandidatePair","items","remoteCandidates","localCandidates","candidatePairs","foundSelectedCandidatePair","item","setSelectedCandidatePair","selectedCandidatePair","local","remote","eventStream","remoteStream","simplePeer","Network","onDataReceived","onSignal","onConnect","onClose","SimplePeer","signalData","parsedSignal","messageString","UIManager","show","gameState","localPlayerId","currentPlayer","currentBetForPlayer","gameCurrentRoundBet","reason","graphics","network","uiManager","isInitiatorFlag","initiateGameButton","outgoingSignalTextarea","incomingSignalTextarea","connectToSignalButton","connectionStatusP","foldButton","checkButton","callButton","betButton","raiseButton","handleSignal","handleConnect","redrawTableAndUI","handleDataReceived","handleClose","handleError","signalValue","performPlayerAction","getAmountFn","currentPlayerInGame"],"mappings":"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","x_google_ignoreList":[6,7,8,9,10,11,12,13,14,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]}